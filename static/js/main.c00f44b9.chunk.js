(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{227:function(e,t,a){e.exports=a(556)},232:function(e,t,a){},249:function(e,t,a){},322:function(e,t){},324:function(e,t){},337:function(e,t){},385:function(e,t){},387:function(e,t){},556:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"playerProfileUpdated",function(){return _}),a.d(n,"chatMessageReceived",function(){return x}),a.d(n,"selfPeerInfo",function(){return P}),a.d(n,"gameInvitationRecieved",function(){return T}),a.d(n,"gameInvitationAccepted",function(){return N});var r,o=a(0),i=a.n(o),c=a(35),s=a.n(c),l=(a(232),a(11)),u=a(14),p=a(16),m=a(15),d=a(17),h=a(85),f=a(206),b=a(19),v=a(44),y=a(137),g=a(36),O=a(86),E=a(208),j=a.n(E),w=a(209),k=a(210),C=a(558),_=Object(C.a)("go/PLAYER_PROFILE_UPDATED",function(e){return{peerId:e.peerId,playerName:e.playerName,playerEmoji:e.playerEmoji}}),x=Object(C.a)("go/CHAT_MESSAGE_RECEIVED",function(e){return{from:e.from,content:e.content,timestamp:e.timestamp}}),P=Object(C.a)("go/SELF_PEER_INFO",function(e){return{peerInfo:e.peerInfo}}),T=Object(C.a)("go/GAME_INVITATION_RECEIVED",function(e){return{from:e.from}}),N=Object(C.a)("go/GAME_INVITATION_ACCEPTED",function(e){return{nonce:e.nonce,players:e.players}}),A=a(27),I=a(225),S=a(557),M=Object(S.a)((r={},Object(A.a)(r,P,function(e,t){var a=t.payload;return Object(b.a)({},e,a)}),Object(A.a)(r,x,function(e,t){var a=t.payload;return Object(b.a)({},e,{messages:Object(I.a)(e.messages).concat([a])})}),Object(A.a)(r,_,function(e,t){var a=t.payload;return Object(b.a)({},e,{players:Object(b.a)({},e.players,Object(A.a)({},a.peerId,Object(b.a)({},a)))})}),Object(A.a)(r,N,function(e,t){var a=t.payload;return Object(b.a)({},e,{game:Object(b.a)({},a)})}),Object(A.a)(r,T,function(e,t){var a=t.payload;return Object(b.a)({},e,{invitation:Object(b.a)({},a)})}),r),{version:0,players:{},invitation:{},game:{},messages:[]}),R=a(108),L=Object(h.connect)(function(e){return{go:e.go,router:e.router}},Object(b.a)({},n)),D=a(3),B=a.n(D),W=a(8),G=Object(R.b)({navigateTo:function(){return function(){var e=Object(W.a)(B.a.mark(function e(t){var a;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.path,J.push(a);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},sendMessage:function(){return function(){var e=Object(W.a)(B.a.mark(function e(t){var a,n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.room,n=t.payload,r=JSON.stringify({action:"chat:message:sent",payload:n}),e.next=4,a.broadcast(r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},updatePlayerProfile:function(){return function(){var e=Object(W.a)(B.a.mark(function e(t){var a,n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.room,n=t.payload,r=JSON.stringify({action:"lobby:player:profileUpdated",payload:n}),e.next=4,a.broadcast(r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},saveDTO:function(){return function(){var e=Object(W.a)(B.a.mark(function e(t){var a,n,r,o,i;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.db,n=t.room,r=t.dto,o=t.opponent,e.next=3,a.put(Object(b.a)({_id:"dto:latest"},r));case 3:return i=JSON.stringify({action:"game:dto:saved",payload:{dto:r}}),e.next=6,n.sendTo(o,i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},deleteDTO:function(){return function(){var e=Object(W.a)(B.a.mark(function e(t){var a,n,r,o,i;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.db,n=t.room,r=t.dto,o=t.opponent,e.next=3,a.del("dto:latest");case 3:return i=JSON.stringify({action:"game:dto:deleted",payload:{dto:r}}),e.next=6,n.sendTo(o,i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},sendGameInvite:function(e){e.gameInvitationAccepted;return function(){var e=Object(W.a)(B.a.mark(function e(t){var a,n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.room,n=t.payload,r=JSON.stringify({action:"game:invite",payload:n}),a.sendTo(n.to,r);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},acceptGameInvite:function(e){var t=e.gameInvitationAccepted;return function(){var e=Object(W.a)(B.a.mark(function e(a){var n,r,o;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.room,r=a.payload,o=JSON.stringify({action:"game:invite:accepted",payload:r}),n.sendTo(r.players[1],o),t(r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}),Y={actions:n,reducer:M,container:Object(R.a)(L,G)},J=Object(g.a)(),z={go:Y.reducer,router:Object(O.connectRouter)(J)},U=a(51),K=a(47),H=(a(249),function(e){var t={key:"root",blacklist:["go"],storage:j.a},a=Object(v.createStore)(Object(y.a)(t,Object(v.combineReducers)(Object(b.a)({},z,e))),Object(w.composeWithDevTools)(Object(v.applyMiddleware)(k.a,Object(O.routerMiddleware)(J))));return{store:a,persistor:Object(y.b)(a),history:J}}()),F=H.store,q=H.persistor,V=H.history,X=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(h.Provider,{store:F},i.a.createElement(f.PersistGate,{persistor:q},i.a.createElement(O.ConnectedRouter,{history:V},i.a.createElement(U.a,null,i.a.createElement(K.a,{exact:!0,path:"/",render:function(){return i.a.createElement(ae,null)}}),i.a.createElement(K.a,{exact:!0,path:"/lobby",render:function(){return i.a.createElement(Me,null)}}),i.a.createElement(K.a,{exact:!0,path:"/resources",render:function(){return i.a.createElement(Ne,null)}}),i.a.createElement(K.a,{exact:!0,path:"/donate",render:function(){return i.a.createElement(_e,null)}}),i.a.createElement(K.a,{exact:!0,path:"/singleplayer",render:function(){return i.a.createElement(ke,null)}}),i.a.createElement(K.a,{path:"/game",render:function(){return i.a.createElement(je,null)}}),i.a.createElement(K.a,{render:function(){return i.a.createElement("div",null,"Miss")}})))))}}]),t}(o.Component),$=a(29),Q=a.n($),Z=a(107),ee=a.n(Z),te=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"LandingPage"},i.a.createElement(ee.a,{className:"Particles"}),i.a.createElement(Q.a,{id:"JoinLobby",variant:"contained",color:"primary",onClick:Object(W.a)(B.a.mark(function t(){return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.props.navigateTo({path:"/lobby"});case 1:case"end":return t.stop()}},t,this)}))},"Enter Lobby to Play"))}}]),t}(o.Component),ae=Y.container(te),ne=a(224),re=a(33),oe=a.n(re),ie=a(54),ce=a.n(ie),se=new window.Ipfs({repo:"/orbitdb/go",EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star"]}}}),le=function(){return window.ipfs?Promise.resolve(window.ipfs):new Promise(function(e,t){se.on("ready",Object(W.a)(B.a.mark(function t(){return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.ipfs=se,e(se);case 2:case"end":return t.stop()}},t,this)})))})},ue=a(316),pe=function(){var e=Object(W.a)(B.a.mark(function e(){var t,a;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.orbitdb){e.next=2;break}return e.abrupt("return",Promise.resolve(window.orbitdb));case 2:return e.next=4,le();case 4:return t=e.sent,void 0,a=new ue(t,"./orbitdb",void 0),window.orbitdb||(window.orbitdb=a),e.abrupt("return",Promise.resolve(window.orbitdb));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),me=a(52),de=a.n(me),he=[],fe=[],be=function e(t){var a=this,n=t.size,r=t.board,o=t.last_move_passed,i=t.in_atari,c=t.attempted_suicide,s=t.history,u=t.captures,p=t.capturesArrayBlack,m=t.capturesArrayWhite,d=t.moveCount,h=t.moveCountArray,f=t.last_move_undo,v=t.current_color;Object(l.a)(this,e),this.getDataTransferObject=function(){return Object(b.a)({},JSON.parse(JSON.stringify(a)))},this.create_board=function(t){for(var a=[],n=0;n<t;n++){a[n]=[];for(var r=0;r<t;r++)a[n][r]=e.EMPTY}return a},this.reset=function(){this.current_color=e.BLACK,this.board=this.create_board(this.size),this.last_move_passed=!1,this.in_atari=!1,this.attempted_suicide=!1,this.history=[],this.captures=[],this.moveCount=0,this.moveCountArray=[],this.last_move_undo=!1},this.switch_player=function(){this.current_color=this.current_color===e.BLACK?e.WHITE:e.BLACK},this.pass=function(){this.last_move_passed&&this.end_game(),this.last_move_passed=!0,this.switch_player()},this.undo=function(){if(this.history.length){var e=this.history.pop(),t=e.board,a=e.current_color;this.board=t,this.current_color=a}},this.end_game=function(){},this.is_valid_state=function(e){for(var t=JSON.stringify(this.board),a=0;this.moveCountArray[this.moveCountArray.length-1]>this.moveCountArray[this.moveCountArray.length-2]&&this.moveCount>0&&a<e.length;a+=1)if(JSON.stringify(e[a].board)===t)return!1;return!0},this.play=function(t,a){if(he.push(t),fe.push(a),this.moveCount++,this.moveCountArray.push(this.moveCount),this.attempted_suicide=this.in_atari=!1,he[he.length-1]===he[he.length-2]&&fe[fe.length-1]===fe[fe.length-2])return this.moveCount--,!1;if(this.board[t][a]!==e.EMPTY)return!1;var n=this.board[t][a]=this.current_color,r=[],o=this.get_adjacent_intersections(t,a),i=!1,c=this;de.a.each(o,function(t){var a=c.board[t[0]][t[1]];if(a!==e.EMPTY&&a!==n){var o=c.get_group(t[0],t[1]);0===o.liberties?r.push(o):1===o.liberties&&(i=!0)}});var s=0,l=0;if(de.a.isEmpty(r)&&0===this.get_group(t,a).liberties)return this.board[t][a]=e.EMPTY,this.attempted_suicide=!0,!1;de.a.each(r,function(t){de.a.each(t.stones,function(t){c.board[t[0]][t[1]]=e.EMPTY,1===n?s++:2===n&&l++})}),this.capturesArrayBlack.push(s),this.capturesArrayWhite.push(l),i&&(this.in_atari=!0),this.last_move_passed=!1,this.switch_player();var u={current_color:this.current_color,board:de.a.cloneDeep(c.board)};return this.history.push(u),!0},this.get_adjacent_intersections=function(e,t){var a=[];return e>0&&a.push([e-1,t]),t<this.size-1&&a.push([e,t+1]),e<this.size-1&&a.push([e+1,t]),t>0&&a.push([e,t-1]),a},this.get_group=function(t,a){var n=this.board[t][a];if(n===e.EMPTY)return null;for(var r={},o=[],i=[[t,a]],c=0,s=function(t){var a=p.board[t[0]][t[1]];a===e.EMPTY&&c++,a===n&&i.push([t[0],t[1]])};i.length>0;){var l=i.pop();if(!r[l]){var u=this.get_adjacent_intersections(l[0],l[1]),p=this;de.a.each(u,s),r[l]=!0,o.push(l)}}return{liberties:c,stones:o}},n&&(this.size=n,this.board=this.create_board(n)),r&&(this.size=r[0].length,this.board=r),this.current_color=v||e.BLACK,this.last_move_passed=o||!1,this.in_atari=i||!1,this.attempted_suicide=c||!1,this.history=s||[],this.captures=u||[],this.capturesArrayBlack=p||[],this.capturesArrayWhite=m||[],this.moveCount=d||0,this.moveCountArray=h||[],this.last_move_undo=f||!1};be.EMPTY=0,be.BLACK=1,be.WHITE=2;var ve=be,ye=a(121),ge=function(e){return"black"===e?1:2},Oe=function(e,t,a){return e&&e[t]?e[t][a]:""},Ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={ready:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(W.a)(B.a.mark(function e(){var t,a,n,r,o,i,c,s,l,u,p,m,d,h=this;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.router,n=t.selfPeerInfo,r=t.playerProfileUpdated,o=a.location.pathname,i=o.replace("/game",""),c=i.split("/")[3],e.next=6,pe();case 6:return s=e.sent,e.next=9,s._ipfs.id();case 9:return l=e.sent,n({peerInfo:l}),u=ye(s._ipfs,c),this.orbitdb=s,this.room=u,this.peerId=l.id,e.next=17,s.open(i);case 17:return this.db=e.sent,e.next=20,this.db.load();case 20:return e.next=22,this.db.get("dto:latest")[0];case 22:if(void 0!==(p=e.sent)){e.next=30;break}return this.board=new ve({size:19}),m=this.board.getDataTransferObject(),e.next=28,this.db.put(Object(b.a)({_id:"dto:latest",name:"dto:latest"},m));case 28:e.next=31;break;case 30:this.board=new ve(p);case 31:u.on("peer joined",function(){var e=Object(W.a)(B.a.mark(function e(t){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),u.on("peer left",function(e){}),u.on("subscribed",function(){}),u.on("message",function(){var e=Object(W.a)(B.a.mark(function e(t){var a,n,o;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=JSON.parse(t.data),n=a.action,o=a.payload,console.log("message...",t,n,o),"lobby:player:profileUpdated"===n&&r(Object(b.a)({},o)),"game:dto:saved"===n&&(h.board=new ve(o.dto),h.setState({board:h.board})),"game:dto:deleted"===n&&(h.board=new ve(o.dto),h.setState({board:h.board}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),d=setInterval(Object(W.a)(B.a.mark(function e(){var t,a,n,r,o;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=u.getPeers(),a=Object(ne.a)(t,1),(n=a[0])&&(o=[l.id,n].sort(),h.setState({ready:!0,opponent:n,you:l.id,colors:(r={},Object(A.a)(r,o[0],"white"),Object(A.a)(r,o[1],"black"),r)}),clearInterval(d));case 2:case"end":return e.stop()}},e,this)})),1e3);case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.go,n=t.saveDTO,r=t.deleteDTO,o=this.state,c=o.ready,s=o.colors,l=o.you,u=o.opponent;return c?i.a.createElement("div",{className:"GamePage"},i.a.createElement(It,null,i.a.createElement(oe.a,{style:{padding:"16px",marginBottom:"16px"}},i.a.createElement(Dt,{room:this.room,peerId:this.peerId})),"\xa0",i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(B.a.mark(function t(){var a;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.board=new ve({size:19}),a=e.board.getDataTransferObject(),t.next=4,e.db.put(Object(b.a)({_id:"dto:latest",name:"dto:latest"},a));case 4:e.setState({board:e.board}),r({room:e.room,db:e.db,dto:a,opponent:u});case 6:case"end":return t.stop()}},t,this)}))},"New Game"),"\xa0",i.a.createElement(Q.a,{variant:"contained",color:"primary"},"Request Undo"),"\xa0",i.a.createElement(Q.a,{align:"right",variant:"contained",color:"primary",onClick:Object(W.a)(B.a.mark(function t(){return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({room:e.room,db:e.db,dto:e.board.getDataTransferObject(),opponent:u});case 1:case"end":return t.stop()}},t,this)}))},"Save Game"),i.a.createElement("p",null,"You are ",s[l],","," ",Oe(a.players,u,"playerName")," is"," ",s[u],". It is "," ",this.board.current_color===ge(s[l])?"your turn":"".concat(Oe(a.players,u,"playerName"),"'s turn.")),i.a.createElement(Le,{currentPlayer:ge(s[l]),board:this.board,onPlay:function(t){e.board=t,e.setState({board:t}),n({room:e.room,db:e.db,dto:e.board.getDataTransferObject(),opponent:u})}}))):i.a.createElement(ce.a,null)}}]),t}(o.Component),je=Y.container(Ee),we=(a(121),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.board=new ve({size:19})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"SinglePlayer"},i.a.createElement(It,null,"\xa0",i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(B.a.mark(function t(){return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.board=new ve({size:19});case 1:case"end":return t.stop()}},t,this)}))},"New Game"),"\xa0",i.a.createElement(Q.a,{variant:"contained",color:"primary"},"Undo"),"\xa0",i.a.createElement("div",null,"\xa0"),i.a.createElement(Le,{board:this.board,onPlay:function(t){e.board=t,e.setState({board:t})}})))}}]),t}(o.Component)),ke=Y.container(we),Ce=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Donate"},i.a.createElement(ee.a,{className:"Particles",params:{fps_limit:28,particles:{color:{value:"#000"},number:{value:200,density:{enable:!1}},line_linked:{enable:!0,distance:30,opacity:1},move:{speed:1},opacity:{anim:{enable:!0,opacity_min:.05,speed:2,sync:!1},value:.4}},polygon:{enable:!0,scale:.9,type:"inline",move:{radius:10},url:"./deer.svg",inline:{arrangement:"equidistant"},draw:{enable:!0,stroke:{color:"rgba(0, 0, 0, .2)"}}},retina_detect:!1,interactivity:{events:{onhover:{enable:!0,mode:"bubble"}},modes:{bubble:{size:6,distance:40}}}}}),i.a.createElement(It,null,i.a.createElement(Q.a,{id:"Donate",variant:"contained",color:"primary",onClick:Object(W.a)(B.a.mark(function t(){return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.props.navigateTo({path:"/donate"});case 1:case"end":return t.stop()}},t,this)}))},"Donate")))}}]),t}(o.Component),_e=Y.container(Ce),xe=a(48),Pe=a.n(xe),Te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={peers:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Resources"},i.a.createElement(It,null,i.a.createElement(Pe.a,{container:!0,spacing:24},i.a.createElement(Pe.a,{item:!0,xs:12},i.a.createElement(oe.a,{style:{padding:"16px"}},i.a.createElement("h3",null,"Helpful Resources"))),i.a.createElement(Pe.a,{item:!0,xs:12,md:6},i.a.createElement(oe.a,{style:{padding:"16px"}},i.a.createElement("p",null,"Schedule a Lesson:"))),i.a.createElement(Pe.a,{item:!0,xs:12,md:6},i.a.createElement(oe.a,{style:{padding:"16px"}},i.a.createElement("p",null,"Useful Links:"))))))}}]),t}(o.Component),Ne=Y.container(Te),Ae=a(121),Ie=function(e,t,a){return e&&e[t]?e[t][a]:t},Se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={peers:[]},a.handleChange=function(e){return function(t){a.setState(Object(A.a)({},e,t.target.value))}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(W.a)(B.a.mark(function e(){var t,a,n,r,o,i,c,s,l,u=this;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.selfPeerInfo,n=t.playerProfileUpdated,r=t.gameInvitationRecieved,o=t.navigateTo,e.next=3,le();case 3:return i=e.sent,e.next=6,pe();case 6:return c=e.sent,e.next=9,i.id();case 9:s=e.sent,this.peerInfo=s,a({peerInfo:s}),this.roomName="go.lobby",l=Ae(i,this.roomName),this.room=l,this.ipfs=i,this.orbitdb=c,l.on("message",function(){var e=Object(W.a)(B.a.mark(function e(t){var a,i,s;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("lobby:player:profileUpdated"===(a=JSON.parse(t.data)).action&&n(Object(b.a)({},a.payload)),"game:invite"===a.action&&r(Object(b.a)({from:t.from},a.payload)),"game:invite:accepted"!==a.action){e.next=9;break}return e.next=6,c.create("go.game.".concat(a.payload.nonce),"docstore",{replicate:!0,overwrite:!0,write:["*"]});case 6:i=e.sent,s=i.address.toString(),o({path:"/game".concat(s)});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),setInterval(Object(W.a)(B.a.mark(function e(){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.setState({peers:l.getPeers()});case 1:case"end":return e.stop()}},e,this)})),5e3);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.peers,a=this.props,n=a.go,r=a.sendGameInvite,o=n.players,c=this.room&&this.peerInfo.id,s=this.room&&t.length>0;return i.a.createElement("div",{className:"LobbyPage"},i.a.createElement(It,null,i.a.createElement(Pe.a,{container:!0,spacing:24},i.a.createElement(Pe.a,{item:!0,xs:12},i.a.createElement(oe.a,{style:{padding:"16px"}},!c&&i.a.createElement(ce.a,null),c&&i.a.createElement(Dt,{room:this.room,peerId:this.peerInfo.id}))),i.a.createElement(Pe.a,{item:!0,xs:12,md:6},i.a.createElement(oe.a,{style:{padding:"16px"}},!s&&i.a.createElement(ce.a,null),s&&i.a.createElement("div",null,i.a.createElement("h3",null," Ask for a game with: "),t.map(function(t){return i.a.createElement("div",{key:t},i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(B.a.mark(function a(){var n;return B.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n={to:t},r({room:e.room,payload:n});case 2:case"end":return a.stop()}},a,this)}))},Ie(o,t,"playerEmoji"),"\xa0"," ",Ie(o,t,"playerName")))})))),i.a.createElement(Pe.a,{item:!0,xs:12,md:6},i.a.createElement(oe.a,{style:{padding:"16px"}},!s&&i.a.createElement(ce.a,null),s&&i.a.createElement(ut,{room:this.room})))),i.a.createElement($e,{room:this.room,orbitdb:this.orbitdb})))}}]),t}(o.Component),Me=Y.container(Se),Re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){void 0===a.props.currentPlayer||a.props.currentPlayer===a.props.board.current_color?a.props.board.play(a.props.row,a.props.col)&&a.props.onPlay(a.props.board):console.log("not your turn!!!")},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={top:38*this.props.row,left:38*this.props.col,backgroundColor:this.props.color!==ve.EMPTY?this.props.color===ve.BLACK?window._PLAYER_ONE_COLOR:window._PLAYER_TWO_COLOR:void 0,backgroundImage:this.props.color!==ve.EMPTY?this.props.color===ve.BLACK?window._PLAYER_ONE_IMAGE:window._PLAYER_TWO_IMAGE:void 0},t="intersection";return this.props.color!==ve.EMPTY&&(t+=this.props.color===ve.BLACK?" black":" white"),i.a.createElement("div",{onClick:this.handleClick,className:t,style:e})}}]),t}(o.Component),Le=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=this.props.board,t=[],a=0;a<e.size;a++)for(var n=0;n<e.size;n++)t.push(i.a.createElement(Re,Object.assign({key:"".concat(a,"-").concat(n)},{board:e,color:e.board[a][n],row:a,col:n,currentPlayer:this.props.currentPlayer,onPlay:this.props.onPlay})));var r={width:38*e.size,height:38*e.size};return i.a.createElement("div",{style:r,id:"board"},t)}}]),t}(o.Component),De=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){a.props.board.pass()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("input",{id:"pass-btn",type:"button",value:"Pass",onClick:this.handleClick})}}]),t}(o.Component),Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){window.location.reload(!1),a.props.board.reset(),a.props.onReset()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("input",{id:"newgame-btn",type:"button",value:"New Game",onClick:this.handleClick})}}]),t}(o.Component),We=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e="black"===this.props.color?this.props.board.capturesArrayBlack:this.props.board.capturesArrayWhite,t="Captures by ".concat(this.props.color,": ")+e.reduce(function(e,t){return e+t},0);return i.a.createElement("div",{id:"alerts"},"\xa0",t,"\xa0")}}]),t}(o.Component),Ge=(o.Component,a(212)),Ye=a.n(Ge),Je=a(216),ze=a.n(Je),Ue=a(214),Ke=a.n(Ue),He=a(215),Fe=a.n(He),qe=a(213),Ve=a.n(qe),Xe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.go.invitation&&e.go.invitation.from&&!Object.keys(e.go.game).length?this.setState({from:e.go.invitation.from,open:!0}):this.setState({open:!1})}},{key:"render",value:function(){var e,t,a,n=this,r=this.props,o=r.go,c=r.room,s=r.acceptGameInvite,l=r.navigateTo,u=this.state,p=u.from,m=u.open;return i.a.createElement("div",null,i.a.createElement(Ye.a,{open:m,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Ve.a,{id:"alert-dialog-title"},"Game Invite"),i.a.createElement(Ke.a,null,i.a.createElement(Fe.a,{id:"alert-dialog-description"},"Invitation from ",(e=o.players,t=p,a="playerName",e&&e[t]?e[t][a]:""),".")),i.a.createElement(ze.a,null,i.a.createElement(Q.a,{onClick:function(){n.setState({open:!1})},color:"primary"},"Reject"),i.a.createElement(Q.a,{onClick:Object(W.a)(B.a.mark(function e(){var t,a,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.random().toString(16),s({room:c,payload:{nonce:t,players:[o.peerInfo.id,o.invitation.from]}}),e.next=4,n.props.orbitdb.create("go.game.".concat(t),"docstore",{replicate:!0,overwrite:!0,write:["*"]});case 4:a=e.sent,r=a.address.toString(),l({path:"/game".concat(r)});case 7:case"end":return e.stop()}},e,this)})),color:"primary",autoFocus:!0},"Accept"))))}}]),t}(i.a.Component),$e=Y.container(Xe),Qe=a(87),Ze=a.n(Qe),et=a(84),tt=a.n(et),at=a(50),nt=a.n(at),rt=a(56),ot=a.n(rt),it=a(60),ct=a.n(it),st=function(e,t,a){return e&&e[t]?e[t][a]:""},lt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={content:"",messages:[]},a.scrollToBottomOfChat=function(){setTimeout(function(){document.querySelector(".chatContainer")&&(document.querySelector(".chatContainer").scrollTop=document.querySelector(".chatContainer").scrollHeight)},1e3)},a.handleChange=function(e){return function(t){a.setState(Object(A.a)({},e,t.target.value))}},a.sendMessage=function(){a.props.sendMessage({room:a.props.room,payload:{content:a.state.content,timestamp:Math.round((new Date).getTime()/1e3)}}),a.setState({content:""})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.room,a=e.chatMessageReceived;t.on("message",function(){var e=Object(W.a)(B.a.mark(function e(t){var n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"chat:message:sent"===(n=JSON.parse(t.data)).action&&(r=Object(b.a)({},n.payload,{from:t.from}),a(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props.go,t=e.messages,a=e.players;return i.a.createElement("div",null,i.a.createElement("h3",null,"Chat"),!t.length&&i.a.createElement("h5",null,"No Messages"),i.a.createElement(tt.a,{className:"chatContainer",style:{maxHeight:"420px",overflowY:"scroll"}},t.map(function(t){var n=st(a,t.from,"playerEmoji"),r=st(e.players,t.from,"playerName");return i.a.createElement(nt.a,{key:t.timestamp,alignItems:"flex-start"},n,i.a.createElement(ot.a,{primary:r,secondary:i.a.createElement(i.a.Fragment,null,i.a.createElement(ct.a,{component:"span",color:"textPrimary"},t.content))}))}),this.scrollToBottomOfChat()),i.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},i.a.createElement(Ze.a,{label:"Message",fullWidth:!0,value:this.state.content,onChange:this.handleChange("content"),margin:"normal"}),i.a.createElement(Q.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:this.sendMessage},"Send")))}}]),t}(o.Component),ut=Y.container(lt),pt=a(219),mt=a.n(pt),dt=a(218),ht=a.n(dt),ft=a(217),bt=a.n(ft),vt=a(136),yt=a.n(vt),gt=a(135),Ot=a.n(gt),Et=a(221),jt=a.n(Et),wt=a(72),kt=a.n(wt),Ct=a(222),_t=a.n(Ct),xt=a(220),Pt=a.n(xt),Tt=a(105),Nt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={mobileOpen:!1},a.handleDrawerToggle=function(){a.setState(function(e){return{mobileOpen:!e.mobileOpen}})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.theme,r=i.a.createElement("div",null,i.a.createElement("div",{className:a.toolbar}),i.a.createElement(bt.a,null),i.a.createElement(tt.a,null,i.a.createElement(nt.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/"})}},i.a.createElement(kt.a,null,i.a.createElement("img",{src:"/home-outline.svg"})),i.a.createElement(ot.a,{primary:"Home"})),i.a.createElement(nt.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/lobby"})}},i.a.createElement(kt.a,null,i.a.createElement("img",{src:"/account-multiple-outline.svg"})),i.a.createElement(ot.a,{primary:"Find a Game"})),i.a.createElement(nt.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/singleplayer"})}},i.a.createElement(kt.a,null,i.a.createElement("img",{src:"/odnoklassniki.svg"})),i.a.createElement(ot.a,{primary:"Local Board"})),i.a.createElement(nt.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/resources"})}},i.a.createElement(kt.a,null,i.a.createElement("img",{src:"/folder-outline.svg"})),i.a.createElement(ot.a,{primary:"Resources"})),i.a.createElement(nt.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/donate"})}},i.a.createElement(kt.a,null,i.a.createElement("img",{src:"/heart-multiple-outline.svg"})),i.a.createElement(ot.a,{primary:"Donate"}))));return i.a.createElement("div",{className:a.root},i.a.createElement(ht.a,null),i.a.createElement(mt.a,{position:"fixed",className:a.appBar},i.a.createElement(Pt.a,null,i.a.createElement(jt.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerToggle,className:a.menuButton},i.a.createElement(_t.a,null)),i.a.createElement(ct.a,{variant:"h6",color:"inherit",noWrap:!0}))),i.a.createElement("nav",{className:a.drawer},i.a.createElement(Ot.a,{smUp:!0,implementation:"css"},i.a.createElement(yt.a,{container:this.props.container,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,classes:{paper:a.drawerPaper}},r)),i.a.createElement(Ot.a,{xsDown:!0,implementation:"css"},i.a.createElement(yt.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},r))),i.a.createElement("main",{className:a.content},i.a.createElement("div",{className:a.toolbar}),this.props.children))}}]),t}(i.a.Component),At=Object(Tt.withStyles)(function(e){return{root:{display:"flex"},drawer:Object(A.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(A.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(A.a)({marginRight:20},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:3*e.spacing.unit}}},{withTheme:!0})(Nt),It=Y.container(At),St=a(223),Mt=a.n(St),Rt=[{value:"\ud83d\ude00",label:"\ud83d\ude00"},{value:"\ud83d\ude05",label:"\ud83d\ude05"},{value:"\ud83d\ude07",label:"\ud83d\ude07"},{value:"\ud83e\udd14",label:"\ud83e\udd14"},{value:"\ud83d\ude30",label:"\ud83d\ude30"}],Lt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={playerName:"",playerEmoji:"\ud83d\ude00"},a.handleChange=function(e){return function(t){a.setState(Object(A.a)({},e,t.target.value)),"playerName"!==e&&"playerEmoji"!==e||a.safePlayerProfileUpdate()}},a.sendProfileToPeers=function(){a.props.updatePlayerProfile({room:a.props.room,payload:{peerId:a.props.peerId,playerName:a.state.playerName,playerEmoji:a.state.playerEmoji}})},a.safePlayerProfileUpdate=de.a.debounce(Object(W.a)(B.a.mark(function e(){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.sendProfileToPeers();case 1:case"end":return e.stop()}},e,this)})),1e3),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={peerId:this.props.peerId,playerName:"guest",playerEmoji:"\ud83d\ude00"};this.setState(Object(b.a)({},t)),this.safePlayerProfileUpdate(),this.props.room.on("peer joined",function(){var t=Object(W.a)(B.a.mark(function t(a){return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Peer joined the room",a),e.sendProfileToPeers();case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),this.props.room.on("subscribed",function(){e.sendProfileToPeers()})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Ze.a,{id:"standard-select-currency",select:!0,label:"Mood",value:this.state.playerEmoji,onChange:this.handleChange("playerEmoji"),margin:"normal"},Rt.map(function(e){return i.a.createElement(Mt.a,{key:e.value,value:e.value},e.label)})),"\xa0\xa0",i.a.createElement(Ze.a,{label:"Nickname",value:this.state.playerName,onChange:this.handleChange("playerName"),margin:"normal"}))}}]),t}(o.Component),Dt=Y.container(Lt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[227,2,1]]]);
//# sourceMappingURL=main.c00f44b9.chunk.js.map