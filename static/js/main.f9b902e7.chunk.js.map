{"version":3,"sources":["store/go/actions.js","store/go/reducer.js","store/go/redux.js","store/go/handlers.js","store/go/index.js","store/go/container.js","store/index.js","components/App/App.js","components/App/index.js","components/LandingPage/LandingPage.js","components/LandingPage/index.js","utils/ipfs-helpers.js","utils/orbit-helpers.js","utils/board.js","components/GamePage/GamePage.js","components/GamePage/index.js","components/SinglePlayer/SinglePlayer.js","components/SinglePlayer/index.js","components/Donate/Donate.js","components/Donate/index.js","components/Resources/Resources.js","components/Resources/index.js","components/LobbyPage/LobbyPage.js","components/LobbyPage/index.js","components/BoardIntersection/index.js","components/BoardIntersection/BoardIntersection.js","constants/index.js","components/BoardView/index.js","components/BoardView/BoardView.js","components/PassView/index.js","components/PassView/PassView.js","components/NewGame/index.js","components/NewGame/NewGame.js","components/CapturesView/index.js","components/CapturesView/CapturesView.js","components/ContainerView/ContainerView.js","components/NewGameDialog/NewGameDialog.js","components/NewGameDialog/index.js","components/InGameChat/InGameChat.js","components/InGameChat/index.js","components/IPFSPubSubChat/IPFSPubSubChat.js","components/IPFSPubSubChat/index.js","components/PageNavigation/PageNavigation.js","components/PageNavigation/index.js","components/PlayerProfile/PlayerProfile.js","components/PlayerProfile/index.js","serviceWorker.js","index.js"],"names":["playerProfileUpdated","createAction","_ref","peerId","playerName","playerEmoji","chatMessageReceived","_ref2","from","content","timestamp","selfPeerInfo","_ref3","peerInfo","gameInvitationRecieved","_ref4","gameInvitationAccepted","_ref5","nonce","players","handleActions","_handleActions","Object","defineProperty","state","payload","objectSpread","messages","toConsumableArray","concat","game","invitation","version","connect","go","router","actions","withHandlers","navigateTo","asyncToGenerator","regenerator_default","a","mark","_callee","path","wrap","_context","prev","next","history","push","stop","this","_x","apply","arguments","sendMessage","_callee2","room","message","_context2","JSON","stringify","action","broadcast","_x2","updatePlayerProfile","_ref6","_callee3","_context3","_x3","saveDTO","_ref8","_callee4","_ref7","db","dto","opponent","_context4","put","_id","sendTo","_x4","deleteDTO","_ref10","_callee5","_ref9","_context5","del","_x5","sendGameInvite","_ref11","_ref13","_callee6","_ref12","_context6","to","_x6","acceptGameInvite","_ref14","_ref16","_callee7","_ref15","_context7","_x7","store_go","reducer","container","compose","withRedux","createBrowserHistory","rootReducer","connectRouter","appReducers","persistConfig","key","blacklist","storage","store","createStore","persistReducer","combineReducers","composeWithDevTools","applyMiddleware","thunk","routerMiddleware","persistor","persistStore","App","react_default","createElement","es","integration_react","lib","Switch","Route","exact","render","components_LandingPage","components_LobbyPage","components_Resources","components_Donate","components_SinglePlayer","components_GamePage","Component","LandingPage","_this","className","particles_default","Button_default","id","variant","color","onClick","props","ipfs","window","Ipfs","repo","EXPERIMENTAL","pubsub","config","Addresses","Swarm","getIPFS","Promise","resolve","reject","on","OrbitDB","require","getOrbitDB","orbitdb","abrupt","sent","undefined","playHistoryX","playHistoryY","Board","size","board","last_move_passed","in_atari","attempted_suicide","captures","capturesArrayBlack","capturesArrayWhite","moveCount","moveCountArray","last_move_undo","current_color","classCallCheck","getDataTransferObject","parse","create_board","m","i","j","EMPTY","reset","BLACK","switch_player","WHITE","pass","end_game","undo","length","_this$history$pop","pop","is_valid_state","n","play","captured","neighbors","get_adjacent_intersections","atari","self","_","each","group","get_group","turnBlack","turnWhite","isEmpty","stone","cloneDeep","visited","visited_list","queue","count","func","liberties","stones","Room","playerColorStringToInt","peerIdToProfileAttribute","attr","GamePage","ready","pathname","location","orbitDBAddress","replace","roomName","split","_ipfs","open","load","get","name","peer","_JSON$parse","data","console","log","_this2","setState","pollTillPresent","setInterval","_room$getPeers","_room$getPeers2","_colors","getPeers","slicedToArray","sort","you","colors","clearInterval","_this3","_this$props2","_this$state","components_PageNavigation","Grid_default","spacing","item","xs","Paper_default","style","padding","marginBottom","components_PlayerProfile","components_InGameChat","align","components_BoardView","currentPlayer","onPlay","CircularProgress_default","SinglePlayer","Donate","params","fps_limit","particles","value","number","density","enable","line_linked","distance","opacity","move","speed","anim","opacity_min","sync","polygon","scale","type","radius","url","inline","arrangement","draw","stroke","retina_detect","interactivity","events","onhover","mode","modes","bubble","Resources","peers","md","LobbyPage","handleChange","event","target","parsedMessage","newGameDB","gameAddress","create","replicate","overwrite","write","address","toString","isProfileReady","isLobbyReady","map","components_IPFSPubSubChat","components_NewGameDialog","BoardIntersection","handleClick","row","col","top","left","backgroundColor","_PLAYER_ONE_COLOR","_PLAYER_TWO_COLOR","backgroundImage","_PLAYER_ONE_IMAGE","_PLAYER_TWO_IMAGE","classes","BoardView","intersections","components_BoardIntersection","assign","width","height","PassView","e","NewGame","reload","onReset","CapturesView","capturesArray","textCaptures","reduce","b","NewGameDialog","nextProps","keys","_this$props","Dialog_default","onClose","handleClose","aria-labelledby","aria-describedby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","Math","random","autoFocus","React","InGameChat","scrollToBottomOfChat","setTimeout","document","querySelector","scrollTop","scrollHeight","round","Date","getTime","chatMessage","List_default","maxHeight","overflowY","mood","ListItem_default","alignItems","ListItemText_default","primary","secondary","Fragment","Typography_default","component","display","flexWrap","TextField_default","label","fullWidth","onChange","margin","IPFSPubSubChat","ResponsiveDrawer","mobileOpen","handleDrawerToggle","theme","drawer","toolbar","Divider_default","button","ListItemIcon_default","src","root","CssBaseline_default","AppBar_default","position","appBar","Toolbar_default","IconButton_default","aria-label","menuButton","Menu_default","noWrap","Hidden_default","smUp","implementation","Drawer_default","anchor","direction","paper","drawerPaper","xsDown","children","withStyles","breakpoints","up","flexShrink","marginLeft","marginRight","mixins","flexGrow","unit","withTheme","PageNavigation","moods","PlayerProfile","safePlayerProfileUpdate","sendProfileToPeers","debounce","profile","select","option","MenuItem_default","Boolean","hostname","match","ReactDOM","components_App","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.f9b902e7.chunk.js","sourcesContent":["import { createAction } from \"redux-actions\";\r\n\r\nexport const playerProfileUpdated = createAction(\r\n  \"go/PLAYER_PROFILE_UPDATED\",\r\n  ({ peerId, playerName, playerEmoji }) => ({\r\n    peerId,\r\n    playerName,\r\n    playerEmoji\r\n  })\r\n);\r\n\r\nexport const chatMessageReceived = createAction(\r\n  \"go/CHAT_MESSAGE_RECEIVED\",\r\n  ({ from, content, timestamp }) => ({\r\n    from,\r\n    content,\r\n    timestamp\r\n  })\r\n);\r\n\r\nexport const selfPeerInfo = createAction(\r\n  \"go/SELF_PEER_INFO\",\r\n  ({ peerInfo }) => ({\r\n    peerInfo\r\n  })\r\n);\r\n\r\nexport const gameInvitationRecieved = createAction(\r\n  \"go/GAME_INVITATION_RECEIVED\",\r\n  ({ from }) => ({\r\n    from\r\n  })\r\n);\r\n\r\nexport const gameInvitationAccepted = createAction(\r\n  \"go/GAME_INVITATION_ACCEPTED\",\r\n  ({ nonce, players }) => ({\r\n    nonce,\r\n    players\r\n  })\r\n);\r\n","import { handleActions } from \"redux-actions\";\r\n\r\nimport {\r\n  selfPeerInfo,\r\n  gameInvitationRecieved,\r\n  gameInvitationAccepted,\r\n  playerProfileUpdated,\r\n  chatMessageReceived\r\n} from \"./actions\";\r\n\r\nconst initialState = {\r\n  version: 0,\r\n  players: {},\r\n  invitation: {},\r\n  game: {},\r\n  messages: [] //require('./__fixtures__/messages').default.messages\r\n};\r\n\r\nexport default handleActions(\r\n  {\r\n    [selfPeerInfo]: (state, { payload }) => ({\r\n      ...state,\r\n      ...payload\r\n    }),\r\n    [chatMessageReceived]: (state, { payload }) => ({\r\n      ...state,\r\n      messages: [...state.messages, payload]\r\n    }),\r\n    [playerProfileUpdated]: (state, { payload }) => ({\r\n      ...state,\r\n      players: {\r\n        ...state.players,\r\n        [payload.peerId]: {\r\n          ...payload\r\n        }\r\n      }\r\n    }),\r\n    [gameInvitationAccepted]: (state, { payload }) => ({\r\n      ...state,\r\n      game: {\r\n        ...payload\r\n      }\r\n    }),\r\n    [gameInvitationRecieved]: (state, { payload }) => ({\r\n      ...state,\r\n      invitation: {\r\n        ...payload\r\n      }\r\n    })\r\n  },\r\n  initialState\r\n);\r\n","import { connect } from \"react-redux\";\r\n\r\nimport * as actions from \"./actions\";\r\n\r\nexport default connect(\r\n  ({ go, router }) => ({ go, router }),\r\n  {\r\n    ...actions\r\n  }\r\n);\r\n","import { withHandlers } from \"recompose\";\r\nimport { history } from \"../index\";\r\n\r\nexport default withHandlers({\r\n  navigateTo: () => async ({ path }) => {\r\n    history.push(path);\r\n  },\r\n  sendMessage: () => async ({ room, payload }) => {\r\n    const message = JSON.stringify({\r\n      action: \"chat:message:sent\",\r\n      payload\r\n    });\r\n    await room.broadcast(message);\r\n  },\r\n  updatePlayerProfile: () => async ({ room, payload }) => {\r\n    const message = JSON.stringify({\r\n      action: \"lobby:player:profileUpdated\",\r\n      payload\r\n    });\r\n    await room.broadcast(message);\r\n  },\r\n  saveDTO: () => async ({ db, room, dto, opponent }) => {\r\n    await db.put({\r\n      _id: \"dto:latest\",\r\n      ...dto\r\n    });\r\n    const message = JSON.stringify({\r\n      action: \"game:dto:saved\",\r\n      payload: {\r\n        dto\r\n      }\r\n    });\r\n    await room.sendTo(opponent, message);\r\n    // alert(\"dto saved.\");\r\n  },\r\n  deleteDTO: () => async ({ db, room, dto, opponent }) => {\r\n    await db.del(\"dto:latest\");\r\n    const message = JSON.stringify({\r\n      action: \"game:dto:deleted\",\r\n      payload: {\r\n        dto\r\n      }\r\n    });\r\n    await room.sendTo(opponent, message);\r\n    // alert(\"dto deleted.\");\r\n  },\r\n  sendGameInvite: ({ gameInvitationAccepted }) => async ({ room, payload }) => {\r\n    const message = JSON.stringify({\r\n      action: \"game:invite\",\r\n      payload\r\n    });\r\n    room.sendTo(payload.to, message);\r\n  },\r\n  acceptGameInvite: ({ gameInvitationAccepted }) => async ({\r\n    room,\r\n    payload\r\n  }) => {\r\n    const message = JSON.stringify({\r\n      action: \"game:invite:accepted\",\r\n      payload\r\n    });\r\n    // you are player 0, they are player 1\r\n    // todo: establish colors and initialize game deterministically from invite.\r\n    room.sendTo(payload.players[1], message);\r\n    gameInvitationAccepted(payload);\r\n  }\r\n});\r\n","import * as actions from \"./actions\";\r\nimport reducer from \"./reducer\";\r\nimport container from \"./container\";\r\n\r\nexport default {\r\n  actions,\r\n  reducer,\r\n  container\r\n};\r\n","import { compose } from 'recompose';\r\n\r\nimport withRedux from './redux';\r\nimport withHandlers from './handlers';\r\n\r\nexport default compose(\r\n  withRedux,\r\n  withHandlers,\r\n);","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport { connectRouter, routerMiddleware } from \"connected-react-router\";\r\n\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport go from \"./go\";\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nconst rootReducer = {\r\n  go: go.reducer,\r\n  router: connectRouter(history)\r\n};\r\n\r\nexport default appReducers => {\r\n  // Persistance configuration\r\n  const persistConfig = {\r\n    key: \"root\",\r\n    blacklist: [\"go\"],\r\n    storage\r\n  };\r\n\r\n  // Store.\r\n  const store = createStore(\r\n    persistReducer(\r\n      persistConfig,\r\n      combineReducers({ ...rootReducer, ...appReducers })\r\n    ),\r\n    composeWithDevTools(applyMiddleware(thunk, routerMiddleware(history)))\r\n  );\r\n\r\n  // Persistor.\r\n  const persistor = persistStore(store);\r\n  return {\r\n    store,\r\n    persistor,\r\n    history\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport { PersistGate } from \"redux-persist/lib/integration/react\";\r\nimport createStore from \"../../store\";\r\n\r\nimport { Route, Switch } from \"react-router\"; // react-router v4\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\n\r\nimport \"./App.css\";\r\n\r\nimport { GamePage, LandingPage, LobbyPage, SinglePlayer, Donate, Resources } from \"../index\";\r\n\r\nconst { store, persistor, history } = createStore();\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Provider store={store}>\r\n        <PersistGate persistor={persistor}>\r\n          <ConnectedRouter history={history}>\r\n            <Switch>\r\n              <Route exact path=\"/\" render={() => <LandingPage />} />\r\n              <Route exact path=\"/lobby\" render={() => <LobbyPage />} />\r\n              <Route exact path=\"/resources\" render={() => <Resources />} />\r\n              <Route exact path=\"/donate\" render={() => <Donate />} />\r\n              <Route exact path=\"/singleplayer\" render={() => <SinglePlayer />} />\r\n              <Route path=\"/game\" render={() => <GamePage />} />\r\n              {/* <Route exact path=\"/game\" render={() => <GamePage />} /> */}\r\n              <Route render={() => <div>Miss</div>} />\r\n            </Switch>\r\n          </ConnectedRouter>\r\n        </PersistGate>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import App from \"./App\";\r\nexport default App;\r\n","import React, { Component } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport Particles from \"react-particles-js\";\r\n\r\nclass LandingPage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"LandingPage\">\r\n        <Particles\r\n          className=\"Particles\"\r\n          /*params={{\r\n            fps_limit: 28,\r\n            particles: {\r\n              color: {\r\n                value: \"#000\"\r\n              },\r\n              number: {\r\n                value: 200,\r\n                density: {\r\n                  enable: false\r\n                }\r\n              },\r\n              line_linked: {\r\n                enable: true,\r\n                distance: 30,\r\n                opacity: 0.4\r\n              },\r\n              move: {\r\n                speed: 1\r\n              },\r\n              opacity: {\r\n                anim: {\r\n                  enable: true,\r\n                  opacity_min: 0.05,\r\n                  speed: 2,\r\n                  sync: false\r\n                },\r\n                value: 0.4\r\n              }\r\n            },\r\n            polygon: {\r\n              enable: true,\r\n              scale: 0.9,\r\n              type: \"inline\",\r\n              move: {\r\n                radius: 10\r\n              },\r\n              url: \"./deer.svg\",\r\n              inline: {\r\n                arrangement: \"equidistant\"\r\n              },\r\n              draw: {\r\n                enable: true,\r\n                stroke: {\r\n                  color: \"rgba(0, 0, 0, .2)\"\r\n                }\r\n              }\r\n            },\r\n            retina_detect: false,\r\n            interactivity: {\r\n              events: {\r\n                onhover: {\r\n                  enable: true,\r\n                  mode: \"bubble\"\r\n                }\r\n              },\r\n              modes: {\r\n                bubble: {\r\n                  size: 6,\r\n                  distance: 40\r\n                }\r\n              }\r\n            }\r\n          }}*/\r\n        />\r\n\r\n        <Button\r\n          id=\"JoinLobby\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={async () => {\r\n            this.props.navigateTo({\r\n              path: \"/lobby\"\r\n            });\r\n          }}\r\n        >\r\n          Enter Lobby to Play\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LandingPage;\r\n","import LandingPage from \"./LandingPage\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(LandingPage);\r\n","const ipfsOptions = {\r\n  repo: \"/orbitdb/go\",\r\n  // start: true,\r\n  EXPERIMENTAL: {\r\n    pubsub: true\r\n  },\r\n  config: {\r\n    Addresses: {\r\n      Swarm: [\r\n        // Use IPFS dev signal server\r\n        // \"/dns4/star-signal.cloud.ipfs.team/wss/p2p-webrtc-star\"\r\n        // \"/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star\"\r\n        \"/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star\"\r\n        // Use local signal server\r\n        // '/ip4/0.0.0.0/tcp/9090/wss/p2p-webrtc-star',\r\n      ]\r\n    }\r\n  }\r\n};\r\n\r\nconst ipfs = new window.Ipfs(ipfsOptions);\r\n\r\nconst getIPFS = () => {\r\n  if (window.ipfs) {\r\n    return Promise.resolve(window.ipfs);\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    ipfs.on(\"ready\", async () => {\r\n      window.ipfs = ipfs;\r\n      resolve(ipfs);\r\n    });\r\n  });\r\n};\r\n\r\nexport default getIPFS;\r\n","import getIPFS from \"./ipfs-helpers\";\r\n\r\nconst OrbitDB = require(\"orbit-db\");\r\n\r\nconst getOrbitDB = async () => {\r\n  if (window.orbitdb) {\r\n    return Promise.resolve(window.orbitdb);\r\n  }\r\n\r\n  const ipfs = await getIPFS();\r\n  const orbitOptions = undefined;\r\n  const orbitdb = new OrbitDB(ipfs, \"./orbitdb\", orbitOptions);\r\n  if (!window.orbitdb) {\r\n    window.orbitdb = orbitdb;\r\n  }\r\n  return Promise.resolve(window.orbitdb);\r\n};\r\n\r\nexport { getOrbitDB };\r\n","import _ from \"lodash\";\r\n\r\nvar playHistoryX = [];\r\nvar playHistoryY = [];\r\n\r\nclass Board {\r\n  static EMPTY = 0;\r\n  static BLACK = 1;\r\n  static WHITE = 2;\r\n\r\n  constructor({\r\n    size,\r\n    board,\r\n    last_move_passed,\r\n    in_atari,\r\n    attempted_suicide,\r\n    history,\r\n    captures,\r\n    capturesArrayBlack,\r\n    capturesArrayWhite,\r\n    moveCount,\r\n    moveCountArray,\r\n    last_move_undo,\r\n    current_color\r\n  }) {\r\n    if (size) {\r\n      this.size = size;\r\n      this.board = this.create_board(size);\r\n    }\r\n    if (board) {\r\n      this.size = board[0].length;\r\n      this.board = board;\r\n    }\r\n    this.current_color = current_color || Board.BLACK;\r\n    this.last_move_passed = last_move_passed || false;\r\n    this.in_atari = in_atari || false;\r\n    this.attempted_suicide = attempted_suicide || false;\r\n    this.history = history || [];\r\n    this.captures = captures || [];\r\n    this.capturesArrayBlack = capturesArrayBlack || [];\r\n    this.capturesArrayWhite = capturesArrayWhite || [];\r\n    this.moveCount = moveCount || 0;\r\n    this.moveCountArray = moveCountArray || [];\r\n    this.last_move_undo = last_move_undo || false;\r\n  }\r\n\r\n  getDataTransferObject = () => {\r\n    return {\r\n      ...JSON.parse(JSON.stringify(this))\r\n    };\r\n  };\r\n\r\n  /*\r\n   * Returns a size x size matrix with all entries initialized to Board.EMPTY\r\n   */\r\n  create_board = function(size) {\r\n    var m = [];\r\n    for (var i = 0; i < size; i++) {\r\n      m[i] = [];\r\n      for (var j = 0; j < size; j++) m[i][j] = Board.EMPTY;\r\n    }\r\n    return m;\r\n  };\r\n\r\n  reset = function() {\r\n    this.current_color = Board.BLACK;\r\n    this.board = this.create_board(this.size);\r\n    this.last_move_passed = false;\r\n    this.in_atari = false;\r\n    this.attempted_suicide = false;\r\n    this.history = [];\r\n    this.captures = [];\r\n    this.moveCount = 0;\r\n    this.moveCountArray = [];\r\n    this.last_move_undo = false;\r\n  };\r\n\r\n  /*\r\n   * Switches the current player\r\n   */\r\n  switch_player = function() {\r\n    this.current_color =\r\n      this.current_color === Board.BLACK ? Board.WHITE : Board.BLACK;\r\n  };\r\n\r\n  /*\r\n   * At any point in the game, a player can pass and let his opponent play\r\n   */\r\n  pass = function() {\r\n    if (this.last_move_passed) this.end_game();\r\n    this.last_move_passed = true;\r\n    this.switch_player();\r\n  };\r\n\r\n  /*\r\n   * At any point in the game, a player can undo and let his opponent play\r\n   */\r\n  undo = function() {\r\n    if (this.history.length) {\r\n      const { board, current_color } = this.history.pop();\r\n      this.board = board;\r\n      this.current_color = current_color;\r\n      // console.log(\"board undo\", this);\r\n    } else {\r\n      // console.log(\"no history\");\r\n    }\r\n  };\r\n\r\n  /*\r\n   * Called when the game ends (both players passed)\r\n   */\r\n  end_game = function() {\r\n    // console.log(\"GAME OVER\");\r\n  };\r\n\r\n  is_valid_state = function(history) {\r\n    // console.log(\"history length \" + this.history.length);\r\n    const state = JSON.stringify(this.board);\r\n    // console.log(\"Im checking if current state is valid\");\r\n    for (\r\n      var n = 0;\r\n      this.moveCountArray[this.moveCountArray.length - 1] >\r\n        this.moveCountArray[this.moveCountArray.length - 2] &&\r\n      this.moveCount > 0 &&\r\n      n < history.length;\r\n      n = n + 1\r\n    ) {\r\n      if (JSON.stringify(history[n].board) === state) {\r\n        // console.log(\"INVALIDDDD\");\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /*\r\n   * Attempt to place a stone at (i,j). Returns true iff the move was legal\r\n   */\r\n  play = function(i, j) {\r\n    playHistoryX.push(i);\r\n    playHistoryY.push(j);\r\n    this.moveCount++;\r\n    // console.log(this.moveCount);\r\n    this.moveCountArray.push(this.moveCount);\r\n    // console.log(\"Played at \" + i + \", \" + j);\r\n    this.attempted_suicide = this.in_atari = false;\r\n    if (\r\n      playHistoryX[playHistoryX.length - 1] ===\r\n        playHistoryX[playHistoryX.length - 2] &&\r\n      playHistoryY[playHistoryY.length - 1] ===\r\n        playHistoryY[playHistoryY.length - 2]\r\n    ) {\r\n      // console.log(\"ko rule\");\r\n      this.moveCount--;\r\n      return false;\r\n    }\r\n    if (this.board[i][j] !== Board.EMPTY) {\r\n      // console.log(\"INVALID MOVE\");\r\n      return false;\r\n    }\r\n    var color = (this.board[i][j] = this.current_color);\r\n    var captured = [];\r\n    var neighbors = this.get_adjacent_intersections(i, j);\r\n    var atari = false;\r\n\r\n    var self = this;\r\n    _.each(neighbors, function(n) {\r\n      var state = self.board[n[0]][n[1]];\r\n      if (state !== Board.EMPTY && state !== color) {\r\n        var group = self.get_group(n[0], n[1]);\r\n        // console.log(group);\r\n        if (group[\"liberties\"] === 0) captured.push(group);\r\n        else if (group[\"liberties\"] === 1) atari = true;\r\n      }\r\n    });\r\n\r\n    var turnBlack = 0;\r\n    var turnWhite = 0;\r\n\r\n    // detect suicide\r\n    if (_.isEmpty(captured) && this.get_group(i, j)[\"liberties\"] === 0) {\r\n      this.board[i][j] = Board.EMPTY;\r\n      this.attempted_suicide = true;\r\n      return false;\r\n    }\r\n\r\n    _.each(captured, function(group) {\r\n      _.each(group[\"stones\"], function(stone) {\r\n        self.board[stone[0]][stone[1]] = Board.EMPTY;\r\n        if (color === 1) {\r\n          turnBlack++;\r\n        } else if (color === 2) {\r\n          turnWhite++;\r\n        }\r\n      });\r\n    });\r\n    this.capturesArrayBlack.push(turnBlack);\r\n    this.capturesArrayWhite.push(turnWhite);\r\n\r\n    if (atari) this.in_atari = true;\r\n\r\n    this.last_move_passed = false;\r\n    this.switch_player();\r\n    const state = {\r\n      current_color: this.current_color,\r\n      board: _.cloneDeep(self.board)\r\n    };\r\n    this.history.push(state);\r\n    // console.log(\"history\", this.history);\r\n    return true;\r\n  };\r\n\r\n  /*\r\n   * Given a board position, returns a list of [i,j] coordinates representing\r\n   * orthagonally adjacent intersections\r\n   */\r\n  get_adjacent_intersections = function(i, j) {\r\n    var neighbors = [];\r\n    if (i > 0) neighbors.push([i - 1, j]);\r\n    if (j < this.size - 1) neighbors.push([i, j + 1]);\r\n    if (i < this.size - 1) neighbors.push([i + 1, j]);\r\n    if (j > 0) neighbors.push([i, j - 1]);\r\n    return neighbors;\r\n  };\r\n\r\n  /*\r\n   * Performs a breadth-first search about an (i,j) position to find recursively\r\n   * orthagonally adjacent stones of the same color (stones with which it shares\r\n   * liberties). Returns null for if there is no stone at the specified position,\r\n   * otherwise returns an object with two keys: \"liberties\", specifying the\r\n   * number of liberties the group has, and \"stones\", the list of [i,j]\r\n   * coordinates of the group's members.\r\n   */\r\n  get_group = function(i, j) {\r\n    var color = this.board[i][j];\r\n    if (color === Board.EMPTY) return null;\r\n\r\n    var visited = {}; // for O(1) lookups\r\n    var visited_list = []; // for returning\r\n    var queue = [[i, j]];\r\n    var count = 0;\r\n\r\n    let func = function(n) {\r\n      var state = self.board[n[0]][n[1]];\r\n      if (state === Board.EMPTY) count++;\r\n      if (state === color) queue.push([n[0], n[1]]);\r\n    };\r\n\r\n    while (queue.length > 0) {\r\n      var stone = queue.pop();\r\n      if (visited[stone]) continue;\r\n\r\n      var neighbors = this.get_adjacent_intersections(stone[0], stone[1]);\r\n      var self = this;\r\n\r\n      _.each(neighbors, func);\r\n\r\n      visited[stone] = true;\r\n      visited_list.push(stone);\r\n    }\r\n\r\n    return {\r\n      liberties: count,\r\n      stones: visited_list\r\n    };\r\n  };\r\n}\r\n\r\nexport default Board;\r\n","import React, { Component } from \"react\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { getOrbitDB } from \"../../utils/orbit-helpers\";\r\n\r\nimport { PageNavigation, PlayerProfile, BoardView } from \"../index\";\r\n\r\nimport Board from \"../../utils/board\";\r\n\r\nimport {\r\n  InGameChat\r\n} from \"../index\";\r\n\r\nconst Room = require(\"ipfs-pubsub-room\");\r\n\r\nconst BOARD_SIZE = 19;\r\n\r\nconst playerColorStringToInt = color => {\r\n  return color === \"black\" ? 1 : 2;\r\n};\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return \"\";\r\n};\r\n\r\nclass GamePage extends Component {\r\n  state = {\r\n    ready: false\r\n  };\r\n  async componentWillMount() {\r\n    const { router, selfPeerInfo, playerProfileUpdated } = this.props;\r\n    const { pathname } = router.location;\r\n    const orbitDBAddress = pathname.replace(\"/game\", \"\");\r\n    const roomName = orbitDBAddress.split(\"/\")[3];\r\n    const orbitdb = await getOrbitDB();\r\n    const peerInfo = await orbitdb._ipfs.id();\r\n    selfPeerInfo({ peerInfo });\r\n    const room = Room(orbitdb._ipfs, roomName);\r\n    this.orbitdb = orbitdb;\r\n    this.room = room;\r\n    this.peerId = peerInfo.id;\r\n    this.db = await orbitdb.open(orbitDBAddress);\r\n    await this.db.load();\r\n    const dto = await this.db.get(\"dto:latest\")[0];\r\n    // console.log(\"loaded dto: \", dto);\r\n    if (dto === undefined) {\r\n      this.board = new Board({ size: BOARD_SIZE });\r\n      const dto = this.board.getDataTransferObject();\r\n      await this.db.put({\r\n        _id: \"dto:latest\",\r\n        name: \"dto:latest\",\r\n        ...dto\r\n      });\r\n    } else {\r\n      this.board = new Board(dto);\r\n      // console.log(\"though it was loaded, it does not render...\", this.board);\r\n    }\r\n\r\n    room.on(\"peer joined\", async peer => {\r\n      // console.log(\"Peer joined the room\", peer);\r\n    });\r\n\r\n    room.on(\"peer left\", peer => {\r\n      // console.log(\"Peer left...\", peer);\r\n    });\r\n\r\n    // now started to listen to room\r\n    room.on(\"subscribed\", () => {\r\n      // console.log(\"Now connected!\");\r\n    });\r\n\r\n    room.on(\"message\", async message => {\r\n      const { action, payload } = JSON.parse(message.data);\r\n      console.log(\"message...\", message, action, payload);\r\n\r\n      if (action === \"lobby:player:profileUpdated\") {\r\n        playerProfileUpdated({\r\n          ...payload\r\n        });\r\n      }\r\n\r\n      if (action === \"game:dto:saved\") {\r\n        this.board = new Board(payload.dto);\r\n        this.setState({\r\n          board: this.board\r\n        });\r\n      }\r\n      if (action === \"game:dto:deleted\") {\r\n        this.board = new Board(payload.dto);\r\n        this.setState({\r\n          board: this.board\r\n        });\r\n      }\r\n    });\r\n\r\n    const pollTillPresent = setInterval(async () => {\r\n      const [opponent] = room.getPeers();\r\n\r\n      if (opponent) {\r\n        const players = [peerInfo.id, opponent].sort();\r\n        this.setState({\r\n          ready: true,\r\n          opponent,\r\n          you: peerInfo.id,\r\n          colors: {\r\n            [players[0]]: \"white\",\r\n            [players[1]]: \"black\"\r\n          }\r\n        });\r\n        clearInterval(pollTillPresent);\r\n      }\r\n    }, 1 * 1000);\r\n  }\r\n  render() {\r\n    const { go, saveDTO, deleteDTO } = this.props;\r\n    const { ready, colors, you, opponent } = this.state;\r\n\r\n    if (!ready) {\r\n      return <CircularProgress />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"GamePage\">\r\n        <PageNavigation>\r\n        <Grid container spacing={24}>\r\n            <Grid item xs={12}>\r\n          <Paper style={{ padding: \"16px\", marginBottom: \"16px\" }}>\r\n            <PlayerProfile room={this.room} peerId={this.peerId} />\r\n          </Paper></Grid>\r\n            <Grid item xs={12}>\r\n            <Paper style={{ padding: \"16px\", marginBottom: \"16px\" }}><InGameChat room={this.room} /></Paper>\r\n            </Grid>\r\n            </Grid>\r\n          &nbsp;\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={async () => {\r\n              this.board = new Board({ size: BOARD_SIZE });\r\n              const dto = this.board.getDataTransferObject();\r\n              await this.db.put({\r\n                _id: \"dto:latest\",\r\n                name: \"dto:latest\",\r\n                ...dto\r\n              });\r\n              this.setState({\r\n                board: this.board\r\n              });\r\n\r\n              deleteDTO({\r\n                room: this.room,\r\n                db: this.db,\r\n                dto,\r\n                opponent\r\n              });\r\n            }}\r\n          >\r\n            New Game\r\n          </Button>\r\n          &nbsp;\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Request Undo\r\n          </Button>\r\n          &nbsp;\r\n          <Button\r\n            align=\"right\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={async () => {\r\n              saveDTO({\r\n                room: this.room,\r\n                db: this.db,\r\n                dto: this.board.getDataTransferObject(),\r\n                opponent\r\n              });\r\n            }}\r\n          >\r\n            Save Game\r\n          </Button>\r\n          \r\n          <p>\r\n            You are {colors[you]},{\" \"}\r\n            {peerIdToProfileAttribute(go.players, opponent, \"playerName\")} is{\" \"}\r\n            {colors[opponent]}. It is {\" \"}\r\n            {this.board.current_color === playerColorStringToInt(colors[you])\r\n              ? \"your turn\"\r\n              : `${peerIdToProfileAttribute(go.players, opponent, \"playerName\")}'s turn.`}\r\n          </p>\r\n          <BoardView\r\n            currentPlayer={playerColorStringToInt(colors[you])}\r\n            board={this.board}\r\n            onPlay={board => {\r\n              this.board = board;\r\n              // really any state update will cause a re-render after assignment..\r\n              this.setState({\r\n                board\r\n              });\r\n              saveDTO({\r\n                room: this.room,\r\n                db: this.db,\r\n                dto: this.board.getDataTransferObject(),\r\n                opponent\r\n              });\r\n            }}\r\n          />\r\n          \r\n        </PageNavigation>\r\n     </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GamePage;\r\n","import GamePage from \"./GamePage\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(GamePage);\r\n","import React, { Component } from \"react\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { getOrbitDB } from \"../../utils/orbit-helpers\";\r\n\r\nimport { PageNavigation, PlayerProfile, BoardView } from \"../index\";\r\n\r\nimport Board from \"../../utils/board\";\r\n\r\nconst Room = require(\"ipfs-pubsub-room\");\r\n\r\nconst BOARD_SIZE = 19;\r\n\r\nconst playerColorStringToInt = color => {\r\n  return color === \"black\" ? 1 : 2;\r\n};\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return \"\";\r\n};\r\n\r\nclass SinglePlayer extends Component {\r\n  \r\ncomponentWillMount() {\r\n \r\n    \r\n    this.board = new Board({ size: BOARD_SIZE });\r\n     \r\n  }\r\n\r\n   \r\n  render() {\r\n    \r\n\r\n    return (\r\n      <div className=\"SinglePlayer\">\r\n        <PageNavigation>\r\n          \r\n          \r\n          &nbsp;\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={async () => {\r\n              this.board = new Board({ size: BOARD_SIZE }); \r\n            }}\r\n          >\r\n            New Game\r\n          </Button>\r\n          &nbsp;\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Undo\r\n          </Button>\r\n          &nbsp;\r\n          <div>\r\n            &nbsp;\r\n          </div>\r\n          <BoardView\r\n            board={this.board}\r\n            onPlay={board => {\r\n              this.board = board;\r\n              // really any state update will cause a re-render after assignment..\r\n              this.setState({\r\n                board\r\n              });\r\n            }}\r\n          />\r\n        </PageNavigation>\r\n     </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SinglePlayer;\r\n","import SinglePlayer from \"./SinglePlayer\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(SinglePlayer);\r\n","import React, { Component } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Particles from \"react-particles-js\";\r\nimport {\r\n  PageNavigation,\r\n} from \"../index\";\r\n\r\nclass Donate extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"Donate\">\r\n        <Particles\r\n          className=\"Particles\"\r\n          params={{\r\n            fps_limit: 28,\r\n            particles: {\r\n              color: {\r\n                value: \"#000\"\r\n              },\r\n              number: {\r\n                value: 200,\r\n                density: {\r\n                  enable: false\r\n                }\r\n              },\r\n              line_linked: {\r\n                enable: true,\r\n                distance: 30,\r\n                opacity: 1\r\n              },\r\n              move: {\r\n                speed: 1\r\n              },\r\n              opacity: {\r\n                anim: {\r\n                  enable: true,\r\n                  opacity_min: 0.05,\r\n                  speed: 2,\r\n                  sync: false\r\n                },\r\n                value: 0.4\r\n              }\r\n            },\r\n            polygon: {\r\n              enable: true,\r\n              scale: 0.9,\r\n              type: \"inline\",\r\n              move: {\r\n                radius: 10\r\n              },\r\n              url: \"./deer.svg\",\r\n              inline: {\r\n                arrangement: \"equidistant\"\r\n              },\r\n              draw: {\r\n                enable: true,\r\n                stroke: {\r\n                  color: \"rgba(0, 0, 0, .2)\"\r\n                }\r\n              }\r\n            },\r\n            retina_detect: false,\r\n            interactivity: {\r\n              events: {\r\n                onhover: {\r\n                  enable: true,\r\n                  mode: \"bubble\"\r\n                }\r\n              },\r\n              modes: {\r\n                bubble: {\r\n                  size: 6,\r\n                  distance: 40\r\n                }\r\n              }\r\n            }\r\n          }}\r\n        />\r\n<PageNavigation>\r\n        <Button\r\n          id=\"Donate\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={async () => {\r\n            this.props.navigateTo({\r\n              path: \"/donate\"\r\n            });\r\n          }}\r\n        >\r\n          Donate\r\n        </Button>\r\n        </PageNavigation>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Donate;\r\n","import Donate from \"./Donate\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(Donate);","import React, { Component } from \"react\";\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport getIPFS from \"../../utils/ipfs-helpers\";\r\n\r\nimport { getOrbitDB } from \"../../utils/orbit-helpers\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport {\r\n  PageNavigation,\r\n  PlayerProfile,\r\n  NewGameDialog,\r\n  IPFSPubSubChat\r\n} from \"../index\";\r\n/*\r\nconst Room = require(\"ipfs-pubsub-room\");\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return peerId;\r\n};\r\n\r\nclass Resources extends Component {\r\n  state = {\r\n    peers: []\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      [name]: event.target.value\r\n    });\r\n  };\r\n  async componentWillMount() {\r\n    // console.log(this.props);\r\n    const {\r\n      selfPeerInfo,\r\n      playerProfileUpdated,\r\n      gameInvitationRecieved,\r\n      navigateTo\r\n    } = this.props;\r\n    const ipfs = await getIPFS();\r\n    const orbitdb = await getOrbitDB();\r\n    const peerInfo = await ipfs.id();\r\n    this.peerInfo = peerInfo;\r\n\r\n    selfPeerInfo({ peerInfo });\r\n    this.roomName = \"go.lobby\";\r\n    const room = Room(ipfs, this.roomName);\r\n    this.room = room;\r\n    this.ipfs = ipfs;\r\n    this.orbitdb = orbitdb;\r\n\r\n    // room.on(\"peer left\", peer => {\r\n    //   console.log(\"Peer left...\", peer);\r\n    // });\r\n\r\n    // now started to listen to room\r\n    // room.on(\"subscribed\", () => {\r\n    //   console.log(\"Now connected!\");\r\n    // });\r\n\r\n    room.on(\"message\", async message => {\r\n      const parsedMessage = JSON.parse(message.data);\r\n      // console.log(parsedMessage);\r\n      if (parsedMessage.action === \"lobby:player:profileUpdated\") {\r\n        playerProfileUpdated({\r\n          ...parsedMessage.payload\r\n        });\r\n      }\r\n      if (parsedMessage.action === \"game:invite\") {\r\n        gameInvitationRecieved({\r\n          from: message.from,\r\n          ...parsedMessage.payload\r\n        });\r\n      }\r\n      if (parsedMessage.action === \"game:invite:accepted\") {\r\n        // TODO update permissions to restrict players only\r\n        const newGameDB = await orbitdb.create(\r\n          `go.game.${parsedMessage.payload.nonce}`,\r\n          \"docstore\",\r\n          {\r\n            replicate: true,\r\n            overwrite: true,\r\n            write: [\"*\"]\r\n          }\r\n        );\r\n        const gameAddress = newGameDB.address.toString();\r\n        navigateTo({\r\n          path: `/game${gameAddress}`\r\n        });\r\n      }\r\n    });\r\n\r\n    setInterval(async () => {\r\n      this.setState({\r\n        peers: room.getPeers()\r\n      });\r\n    }, 5 * 1000);\r\n  }*/\r\n /* render() {\r\n    const { peers } = this.state;\r\n    const { go, sendGameInvite } = this.props;\r\n\r\n    const { players } = go;\r\n\r\n    const isProfileReady = this.room && this.peerInfo.id;\r\n    const isLobbyReady = this.room && peers.length > 0;*/\r\n\r\n    // console.log(\"lobby render.\");\r\n    class Resources extends Component {\r\n      state = {\r\n        peers: []\r\n      };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Resources\">\r\n        <PageNavigation>\r\n          <Grid container spacing={24}>\r\n            <Grid item xs={12}>\r\n              \r\n                <h3>Resources</h3>\r\n              \r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <Paper style={{ padding: \"16px\" }}>\r\n                <h3>Schedule a Lesson:</h3>\r\n                <p>Purchase a 30 minute or 1-hour Go lesson.</p>\r\n                <Button\r\n          id=\"BuyLesson\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={async () => {\r\n            this.props.navigateTo({\r\n              path: \"/resources\"\r\n            });\r\n          }}\r\n        >\r\n          Purchase a Lesson\r\n        </Button>\r\n              </Paper>\r\n            </Grid>\r\n          \r\n          </Grid>\r\n          \r\n        </PageNavigation>\r\n      </div>\r\n    );\r\n    };\r\n\r\n  }\r\nexport default Resources;\r\n","import Resources from \"./Resources\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(Resources);\r\n","import React, { Component } from \"react\";\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport getIPFS from \"../../utils/ipfs-helpers\";\r\n\r\nimport { getOrbitDB } from \"../../utils/orbit-helpers\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport {\r\n  PageNavigation,\r\n  PlayerProfile,\r\n  NewGameDialog,\r\n  IPFSPubSubChat\r\n} from \"../index\";\r\n\r\nconst Room = require(\"ipfs-pubsub-room\");\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return peerId;\r\n};\r\n\r\nclass LobbyPage extends Component {\r\n  state = {\r\n    peers: []\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      [name]: event.target.value\r\n    });\r\n  };\r\n  async componentWillMount() {\r\n    // console.log(this.props);\r\n    const {\r\n      selfPeerInfo,\r\n      playerProfileUpdated,\r\n      gameInvitationRecieved,\r\n      navigateTo\r\n    } = this.props;\r\n    const ipfs = await getIPFS();\r\n    const orbitdb = await getOrbitDB();\r\n    const peerInfo = await ipfs.id();\r\n    this.peerInfo = peerInfo;\r\n\r\n    selfPeerInfo({ peerInfo });\r\n    this.roomName = \"go.lobby\";\r\n    const room = Room(ipfs, this.roomName);\r\n    this.room = room;\r\n    this.ipfs = ipfs;\r\n    this.orbitdb = orbitdb;\r\n\r\n    // room.on(\"peer left\", peer => {\r\n    //   console.log(\"Peer left...\", peer);\r\n    // });\r\n\r\n    // now started to listen to room\r\n    // room.on(\"subscribed\", () => {\r\n    //   console.log(\"Now connected!\");\r\n    // });\r\n\r\n    room.on(\"message\", async message => {\r\n      const parsedMessage = JSON.parse(message.data);\r\n      // console.log(parsedMessage);\r\n      if (parsedMessage.action === \"lobby:player:profileUpdated\") {\r\n        playerProfileUpdated({\r\n          ...parsedMessage.payload\r\n        });\r\n      }\r\n      if (parsedMessage.action === \"game:invite\") {\r\n        gameInvitationRecieved({\r\n          from: message.from,\r\n          ...parsedMessage.payload\r\n        });\r\n      }\r\n      if (parsedMessage.action === \"game:invite:accepted\") {\r\n        // TODO update permissions to restrict players only\r\n        const newGameDB = await orbitdb.create(\r\n          `go.game.${parsedMessage.payload.nonce}`,\r\n          \"docstore\",\r\n          {\r\n            replicate: true,\r\n            overwrite: true,\r\n            write: [\"*\"]\r\n          }\r\n        );\r\n        const gameAddress = newGameDB.address.toString();\r\n        navigateTo({\r\n          path: `/game${gameAddress}`\r\n        });\r\n      }\r\n    });\r\n\r\n    setInterval(async () => {\r\n      this.setState({\r\n        peers: room.getPeers()\r\n      });\r\n    }, 5 * 1000);\r\n  }\r\n  render() {\r\n    const { peers } = this.state;\r\n    const { go, sendGameInvite } = this.props;\r\n\r\n    const { players } = go;\r\n\r\n    const isProfileReady = this.room && this.peerInfo.id;\r\n    const isLobbyReady = this.room && peers.length > 0;\r\n\r\n    // console.log(\"lobby render.\");\r\n\r\n    return (\r\n      <div className=\"LobbyPage\">\r\n        <PageNavigation>\r\n          <Grid container spacing={24}>\r\n            <Grid item xs={12}>\r\n              <Paper style={{ padding: \"16px\" }}>\r\n                {!isProfileReady && <CircularProgress />}\r\n                {isProfileReady && (\r\n                  <PlayerProfile room={this.room} peerId={this.peerInfo.id} />\r\n                )}\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <Paper style={{ padding: \"16px\" }}>\r\n                {!isLobbyReady && <CircularProgress />}\r\n                {isLobbyReady && (\r\n                  <div>\r\n                    <h3> Ask for a game with: </h3>\r\n                    {peers.map(peerId => {\r\n                      return (\r\n                        <div key={peerId}>\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={async () => {\r\n                              const payload = {\r\n                                to: peerId\r\n                              };\r\n                              sendGameInvite({ room: this.room, payload });\r\n                            }}\r\n                          >\r\n                            {peerIdToProfileAttribute(\r\n                              players,\r\n                              peerId,\r\n                              \"playerEmoji\"\r\n                            )}\r\n                            &nbsp;{\" \"}\r\n                            {peerIdToProfileAttribute(\r\n                              players,\r\n                              peerId,\r\n                              \"playerName\"\r\n                            )}\r\n                          </Button>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </Paper>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <Paper style={{ padding: \"16px\" }}>\r\n                {!isLobbyReady && <CircularProgress />}\r\n                {isLobbyReady && <IPFSPubSubChat room={this.room} />}\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n          <NewGameDialog room={this.room} orbitdb={this.orbitdb} />\r\n        </PageNavigation>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LobbyPage;\r\n","import LobbyPage from \"./LobbyPage\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(LobbyPage);\r\n","import BoardIntersection from \"./BoardIntersection\";\r\nexport default BoardIntersection;\r\n","import React, { Component } from \"react\";\r\n\r\nimport Board from \"../../utils/board\";\r\n\r\nimport { GRID_SIZE } from \"../../constants\";\r\n\r\nclass BoardIntersection extends Component {\r\n  handleClick = () => {\r\n    if (this.props.currentPlayer !== undefined && this.props.currentPlayer !== this.props.board.current_color){\r\n      console.log('not your turn!!!')\r\n      return;\r\n    }\r\n    if (this.props.board.play(this.props.row, this.props.col))\r\n      this.props.onPlay(this.props.board);\r\n  };\r\n  render() {\r\n    var style = {\r\n      top: this.props.row * GRID_SIZE,\r\n      left: this.props.col * GRID_SIZE,\r\n      backgroundColor:\r\n        this.props.color !== Board.EMPTY\r\n          ? this.props.color === Board.BLACK\r\n            ? window._PLAYER_ONE_COLOR\r\n            : window._PLAYER_TWO_COLOR\r\n          : undefined,\r\n      backgroundImage:\r\n        this.props.color !== Board.EMPTY\r\n          ? this.props.color === Board.BLACK\r\n            ? window._PLAYER_ONE_IMAGE\r\n            : window._PLAYER_TWO_IMAGE\r\n          : undefined\r\n    };\r\n\r\n    var classes = \"intersection\";\r\n    if (this.props.color !== Board.EMPTY)\r\n      classes += this.props.color === Board.BLACK ? \" black\" : \" white\";\r\n\r\n    return <div onClick={this.handleClick} className={classes} style={style} />;\r\n  }\r\n}\r\n\r\nexport default BoardIntersection;\r\n","export const GRID_SIZE = 38;","import BoardView from \"./BoardView\";\r\nexport default BoardView;\r\n","import React, { Component } from \"react\";\r\n\r\nimport { BoardIntersection } from \"../index\";\r\n\r\nimport { GRID_SIZE } from \"../../constants\";\r\n\r\nclass BoardView extends Component {\r\n  render() {\r\n    const { board } = this.props;\r\n    var intersections = [];\r\n    for (var i = 0; i < board.size; i++)\r\n      for (var j = 0; j < board.size; j++)\r\n        intersections.push(\r\n          <BoardIntersection\r\n            key={`${i}-${j}`}\r\n            {...{\r\n              board: board,\r\n              color: board.board[i][j],\r\n              row: i,\r\n              col: j,\r\n              currentPlayer: this.props.currentPlayer,\r\n              onPlay: this.props.onPlay\r\n            }}\r\n          />\r\n        );\r\n    var style = {\r\n      width: board.size * GRID_SIZE,\r\n      height: board.size * GRID_SIZE\r\n    };\r\n    return (\r\n      <div style={style} id=\"board\">\r\n        {intersections}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BoardView;\r\n","import PassView from \"./PassView\";\r\nexport default PassView;\r\n","import React, { Component } from \"react\";\r\n\r\nclass PassView extends Component {\r\n  handleClick = e => {\r\n    this.props.board.pass();\r\n  };\r\n  render() {\r\n    return (\r\n      <input\r\n        id=\"pass-btn\"\r\n        type=\"button\"\r\n        value=\"Pass\"\r\n        onClick={this.handleClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default PassView;\r\n","import NewGame from \"./NewGame\";\r\nexport default NewGame;\r\n","import React, { Component } from \"react\";\r\n\r\nclass NewGame extends Component {\r\n  handleClick = e => {\r\n    window.location.reload(false);\r\n    this.props.board.reset();\r\n    this.props.onReset();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <input\r\n        id=\"newgame-btn\"\r\n        type=\"button\"\r\n        value=\"New Game\"\r\n        onClick={this.handleClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewGame;\r\n","import CapturesView from \"./CapturesView\";\r\n\r\nexport default CapturesView;\r\n","import React, { Component } from \"react\";\r\n\r\nclass CapturesView extends Component {\r\n  render() {\r\n    let capturesArray =\r\n      this.props.color === \"black\"\r\n        ? this.props.board.capturesArrayBlack\r\n        : this.props.board.capturesArrayWhite;\r\n    var textCaptures =\r\n      `Captures by ${this.props.color}: ` +\r\n      capturesArray.reduce((a, b) => a + b, 0);\r\n    return <div id=\"alerts\">&nbsp;{textCaptures}&nbsp;</div>;\r\n  }\r\n}\r\n\r\nexport default CapturesView;\r\n","import React, { Component } from \"react\";\r\n// import _ from \"lodash\";\r\n\r\nimport { BoardView, PassView, NewGame, CapturesView } from \"../index\";\r\n\r\nclass ContainerView extends Component {\r\n\r\n  componentWillMount() {\r\n    console.log('container view mount....',)\r\n    this.setState({\r\n      board: this.props.board,\r\n    });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    console.log('container view receive props....',)\r\n    this.setState({\r\n      board: nextProps.board\r\n    });\r\n  }\r\n\r\n  onBoardUpdate() {\r\n    // if (this.state.board.is_valid_state(this.state.history)) {\r\n    //   let history = this.state.history;\r\n    //   history.push(_.cloneDeep(this.state.board));\r\n    //   this.setState({ board: this.state.board, history: history });\r\n    //   console.log(\"board was updated and component shall render\");\r\n    // } else {\r\n    //   console.log(\"invalid move, reset to prior state\");\r\n    //   console.log(this.state.history.length);\r\n    //   var last = this.state.history[this.state.history.length - 1];\r\n    //   console.log(\"set board to\", last);\r\n    //   this.setState({ board: last });\r\n    //   this.state.history.pop();\r\n    //   console.log(this.state.history.length);\r\n    // }\r\n  }\r\n\r\n  undo = () => {\r\n    // var { history } = this.state;\r\n    // if (history.length <= 1) {\r\n    //   window.location.reload(false);\r\n    //   console.log(\"nothing to undo\");\r\n    //   return;\r\n    // }\r\n    // console.log(\"popping:\", history.pop());\r\n    // var last = history[history.length - 1];\r\n    // console.log(\"set board to\", last);\r\n    // this.setState({ board: last, history: history });\r\n    // this.props.board.capturesArrayBlack.pop();\r\n    // this.props.board.capturesArrayWhite.pop();\r\n    // this.moveCount--;\r\n    // console.log(\"board was updated and component shall render\");\r\n\r\n    // console.log(\"undo...\", this.state.history, this.state.board);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"ContainerView\">\r\n        <div className=\"ContainerViewBoard\">\r\n          <BoardView\r\n            board={this.state.board}\r\n            onPlay={this.onBoardUpdate.bind(this)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"ContainerViewSidebar\">\r\n          <a href=\"https://github.com/L1zz13/G0/\">Source Code</a>\r\n          <CapturesView board={this.state.board} color={\"black\"} />\r\n          <CapturesView board={this.state.board} color={\"white\"} />\r\n          <PassView board={this.state.board} />\r\n          <br />\r\n          <br />\r\n          <NewGame\r\n            board={this.state.board}\r\n            onReset={this.onBoardUpdate.bind(this)}\r\n          />\r\n          <br />\r\n          <br />\r\n          <button onClick={this.undo}>Undo</button>\r\n          <br />\r\n          <br />\r\n\r\n          <p>\r\n            Select Player 1 Color: <br />\r\n            <select\r\n              name=\"playerOneColor\"\r\n              onChange={e => {\r\n                console.log(e.target.value);\r\n                window._PLAYER_ONE_COLOR = e.target.value;\r\n              }}\r\n            >\r\n              <option name=\"default\" value=\"#5632a8\">\r\n                default\r\n              </option>\r\n              <option name=\"black\" value=\"#000000\">\r\n                black\r\n              </option>\r\n              <option name=\"red\" value=\"#D0112E\">\r\n                red\r\n              </option>\r\n              <option name=\"blue\" value=\"#4B98F9\">\r\n                blue\r\n              </option>\r\n              <option name=\"orange\" value=\"#FD9D16\">\r\n                orange\r\n              </option>\r\n            </select>\r\n          </p>\r\n          <p>\r\n            Select Player 2 Color: <br />\r\n            <select\r\n              name=\"playerTwoColor\"\r\n              onChange={e => {\r\n                console.log(e);\r\n                window._PLAYER_TWO_COLOR = e.target.value;\r\n              }}\r\n            >\r\n              <option name=\"default\" value=\"#fbfbca\">\r\n                default\r\n              </option>\r\n              <option name=\"default\" value=\"#ffffff\">\r\n                white\r\n              </option>\r\n              <option name=\"pale blue\" value=\"#C1F0FE\">\r\n                pale blue\r\n              </option>\r\n              <option name=\"lavender\" value=\"#E4C2FD\">\r\n                lavender\r\n              </option>\r\n              <option name=\"green\" value=\"#A1FD98\">\r\n                green\r\n              </option>\r\n            </select>\r\n          </p>\r\n\r\n          <p>\r\n            Select Player 1 Emoji: <br />\r\n            <select\r\n              name=\"playerOneImage\"\r\n              onChange={e => {\r\n                console.log(e.target.value);\r\n                window._PLAYER_ONE_IMAGE = e.target.value;\r\n              }}\r\n            >\r\n              <option name=\"default\" value=\"\">\r\n                none\r\n              </option>\r\n              <option\r\n                name=\"1\"\r\n                value=\"url('http://pages.kwanzoo.com/rs/358-EUI-570/images/pusheen-cat-donuts-black-small-2.png')\"\r\n              >\r\n                donut pusheen\r\n              </option>\r\n              <option\r\n                name=\"2\"\r\n                value=\"url('http://pages.kwanzoo.com/rs/358-EUI-570/images/pusheen-squid-black-SMALL.png')\"\r\n              >\r\n                squid pusheen\r\n              </option>\r\n              <option\r\n                name=\"3\"\r\n                value=\"url('http://pages.kwanzoo.com/rs/358-EUI-570/images/happyface-black-small-3.png')\"\r\n              >\r\n                happy face\r\n              </option>\r\n            </select>{\" \"}\r\n          </p>\r\n          <p>\r\n            Select Player 2 Emoji: <br />\r\n            <select\r\n              name=\"playerTwoImage\"\r\n              onChange={e => {\r\n                console.log(e.target.value);\r\n                window._PLAYER_TWO_IMAGE = e.target.value;\r\n              }}\r\n            >\r\n              <option name=\"default\" value=\"\">\r\n                none\r\n              </option>\r\n              <option\r\n                name=\"1\"\r\n                value=\"url('http://pages.kwanzoo.com/rs/358-EUI-570/images/pusheen-cat-cat-SMOL.png')\"\r\n              >\r\n                cat pusheen\r\n              </option>\r\n              <option\r\n                name=\"2\"\r\n                value=\"url('http://pages.kwanzoo.com/rs/358-EUI-570/images/pusheen-art-SMOL.png')\"\r\n              >\r\n                art pusheen\r\n              </option>\r\n              <option\r\n                name=\"3\"\r\n                value=\"url('http://pages.kwanzoo.com/rs/358-EUI-570/images/upside-down-happy-SMALL.png')\"\r\n              >\r\n                happy face\r\n              </option>\r\n            </select>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContainerView;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return \"\";\r\n};\r\n\r\nclass NewGameDialog extends React.Component {\r\n  state = {\r\n    open: false\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.go.invitation &&\r\n      nextProps.go.invitation.from &&\r\n      !Object.keys(nextProps.go.game).length\r\n    ) {\r\n      this.setState({\r\n        from: nextProps.go.invitation.from,\r\n        open: true\r\n      });\r\n    } else {\r\n      this.setState({\r\n        open: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { go, room, acceptGameInvite, navigateTo } = this.props;\r\n    const { from, open } = this.state;\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={open}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">{\"Game Invite\"}</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n              Invitation from {peerIdToProfileAttribute(go.players, from, 'playerName')}.\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={() => {\r\n                this.setState({ open: false });\r\n              }}\r\n              color=\"primary\"\r\n            >\r\n              Reject\r\n            </Button>\r\n            <Button\r\n              onClick={async () => {\r\n                const nonce = Math.random().toString(16);\r\n                acceptGameInvite({\r\n                  room,\r\n                  payload: {\r\n                    nonce,\r\n                    players: [go.peerInfo.id, go.invitation.from]\r\n                  }\r\n                });\r\n\r\n                const newGameDB = await this.props.orbitdb.create(\r\n                  `go.game.${nonce}`,\r\n                  \"docstore\",\r\n                  {\r\n                    replicate: true,\r\n                    overwrite: true,\r\n                    write: [\"*\"]\r\n                  }\r\n                );\r\n\r\n                const gameAddress = newGameDB.address.toString();\r\n\r\n                navigateTo({\r\n                  path: `/game${gameAddress}`\r\n                });\r\n              }}\r\n              color=\"primary\"\r\n              autoFocus\r\n            >\r\n              Accept\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewGameDialog;\r\n","import NewGameDialog from \"./NewGameDialog\";\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(NewGameDialog);\r\n","import React, { Component } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return \"\";\r\n};\r\n\r\nclass InGameChat extends Component {\r\n  state = {\r\n    content: \"\",\r\n    messages: []\r\n  };\r\n  componentWillMount() {\r\n    const { room, chatMessageReceived } = this.props;\r\n    room.on(\"message\", async message => {\r\n      const parsedMessage = JSON.parse(message.data);\r\n      if (parsedMessage.action === \"chat:message:sent\") {\r\n        const chatMessage = {\r\n          ...parsedMessage.payload,\r\n          from: message.from\r\n        };\r\n        chatMessageReceived(chatMessage);\r\n      }\r\n    });\r\n  }\r\n\r\n  scrollToBottomOfChat = () => {\r\n    setTimeout(() => {\r\n      if (!document.querySelector(\".chatContainer\")) {\r\n        return;\r\n      }\r\n      document.querySelector(\r\n        \".chatContainer\"\r\n      ).scrollTop = document.querySelector(\".chatContainer\").scrollHeight;\r\n    }, 1 * 1000);\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      [name]: event.target.value\r\n    });\r\n  };\r\n\r\n  sendMessage = () => {\r\n    this.props.sendMessage({\r\n      room: this.props.room,\r\n      payload: {\r\n        content: this.state.content,\r\n        timestamp: Math.round(new Date().getTime() / 1000)\r\n      }\r\n    });\r\n    this.setState({\r\n      content: \"\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { go } = this.props;\r\n    const { messages, players } = go;\r\n    return (\r\n      <div>\r\n        <h3>Chat</h3>\r\n        {!messages.length && <h5>No Messages</h5>}\r\n        <List\r\n          className=\"chatContainer\"\r\n          style={{\r\n            maxHeight: \"420px\",\r\n            overflowY: \"scroll\"\r\n          }}\r\n        >\r\n          {messages.map(m => {\r\n            const mood = peerIdToProfileAttribute(\r\n              players,\r\n              m.from,\r\n              \"playerEmoji\"\r\n            );\r\n            const name = peerIdToProfileAttribute(\r\n              go.players,\r\n              m.from,\r\n              \"playerName\"\r\n            );\r\n            return (\r\n              <ListItem key={m.timestamp} alignItems=\"flex-start\">\r\n                {mood}\r\n                <ListItemText\r\n                  primary={name}\r\n                  secondary={\r\n                    <React.Fragment>\r\n                      <Typography component=\"span\" color=\"textPrimary\">\r\n                        {m.content}\r\n                      </Typography>\r\n                    </React.Fragment>\r\n                  }\r\n                />\r\n              </ListItem>\r\n            );\r\n          })}\r\n          {this.scrollToBottomOfChat()}\r\n        </List>\r\n        <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n          <TextField\r\n            label=\"Message\"\r\n            fullWidth\r\n            value={this.state.content}\r\n            onChange={this.handleChange(\"content\")}\r\n            margin=\"normal\"\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            fullWidth\r\n            onClick={this.sendMessage}\r\n          >\r\n            Send\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InGameChat;\r\n","import InGameChat from \"./InGameChat\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(InGameChat);\r\n","import React, { Component } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst peerIdToProfileAttribute = (players, peerId, attr) => {\r\n  if (players && players[peerId]) {\r\n    return players[peerId][attr];\r\n  }\r\n  return \"\";\r\n};\r\n\r\nclass IPFSPubSubChat extends Component {\r\n  state = {\r\n    content: \"\",\r\n    messages: []\r\n  };\r\n  componentWillMount() {\r\n    const { room, chatMessageReceived } = this.props;\r\n    room.on(\"message\", async message => {\r\n      const parsedMessage = JSON.parse(message.data);\r\n      if (parsedMessage.action === \"chat:message:sent\") {\r\n        const chatMessage = {\r\n          ...parsedMessage.payload,\r\n          from: message.from\r\n        };\r\n        chatMessageReceived(chatMessage);\r\n      }\r\n    });\r\n  }\r\n\r\n  scrollToBottomOfChat = () => {\r\n    setTimeout(() => {\r\n      if (!document.querySelector(\".chatContainer\")) {\r\n        return;\r\n      }\r\n      document.querySelector(\r\n        \".chatContainer\"\r\n      ).scrollTop = document.querySelector(\".chatContainer\").scrollHeight;\r\n    }, 1 * 1000);\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      [name]: event.target.value\r\n    });\r\n  };\r\n\r\n  sendMessage = () => {\r\n    this.props.sendMessage({\r\n      room: this.props.room,\r\n      payload: {\r\n        content: this.state.content,\r\n        timestamp: Math.round(new Date().getTime() / 1000)\r\n      }\r\n    });\r\n    this.setState({\r\n      content: \"\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { go } = this.props;\r\n    const { messages, players } = go;\r\n    return (\r\n      <div>\r\n        <h3>Chat</h3>\r\n        {!messages.length && <h5>No Messages</h5>}\r\n        <List\r\n          className=\"chatContainer\"\r\n          style={{\r\n            maxHeight: \"420px\",\r\n            overflowY: \"scroll\"\r\n          }}\r\n        >\r\n          {messages.map(m => {\r\n            const mood = peerIdToProfileAttribute(\r\n              players,\r\n              m.from,\r\n              \"playerEmoji\"\r\n            );\r\n            const name = peerIdToProfileAttribute(\r\n              go.players,\r\n              m.from,\r\n              \"playerName\"\r\n            );\r\n            return (\r\n              <ListItem key={m.timestamp} alignItems=\"flex-start\">\r\n                {mood}\r\n                <ListItemText\r\n                  primary={name}\r\n                  secondary={\r\n                    <React.Fragment>\r\n                      <Typography component=\"span\" color=\"textPrimary\">\r\n                        {m.content}\r\n                      </Typography>\r\n                    </React.Fragment>\r\n                  }\r\n                />\r\n              </ListItem>\r\n            );\r\n          })}\r\n          {this.scrollToBottomOfChat()}\r\n        </List>\r\n        <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n          <TextField\r\n            label=\"Message\"\r\n            fullWidth\r\n            value={this.state.content}\r\n            onChange={this.handleChange(\"content\")}\r\n            margin=\"normal\"\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            fullWidth\r\n            onClick={this.sendMessage}\r\n          >\r\n            Send\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default IPFSPubSubChat;\r\n","import IPFSPubSubChat from \"./IPFSPubSubChat\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(IPFSPubSubChat);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    display: \"flex\"\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0\r\n    }\r\n  },\r\n  appBar: {\r\n    marginLeft: drawerWidth,\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: `calc(100% - ${drawerWidth}px)`\r\n      \r\n    }\r\n  },\r\n  menuButton: {\r\n    marginRight: 20,\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"none\"\r\n    }\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing.unit * 3\r\n  }\r\n});\r\n\r\nclass ResponsiveDrawer extends React.Component {\r\n  state = {\r\n    mobileOpen: false\r\n  };\r\n\r\n  handleDrawerToggle = () => {\r\n    this.setState(state => ({ mobileOpen: !state.mobileOpen }));\r\n  };\r\n\r\n  render() {\r\n    const { classes, theme } = this.props;\r\n\r\n    const drawer = (\r\n      <div>\r\n        <div className={classes.toolbar} />\r\n        <Divider />\r\n        <List>\r\n          <ListItem\r\n            button\r\n            onClick={() => {\r\n              this.props.navigateTo({\r\n                path: \"/\"\r\n              });\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n            <img src=\"/home-outline.svg\"></img>\r\n            </ListItemIcon>\r\n            <ListItemText primary={\"Home\"} />\r\n          </ListItem>\r\n\r\n\r\n\r\n          <ListItem\r\n            button\r\n            onClick={() => {\r\n              this.props.navigateTo({\r\n                path: \"/lobby\"\r\n              });\r\n            }}\r\n\r\n          >\r\n            <ListItemIcon>\r\n            <img src=\"/account-multiple-outline.svg\"></img>\r\n            </ListItemIcon>\r\n            <ListItemText primary={\"Find a Game\"} />\r\n          </ListItem>\r\n\r\n<ListItem\r\n            button\r\n            onClick={() => {\r\n              this.props.navigateTo({\r\n                path: \"/singleplayer\"\r\n              });\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n             <img src=\"/odnoklassniki.svg\"></img>\r\n            </ListItemIcon>\r\n            <ListItemText primary={\"Local Board\"} />\r\n          </ListItem>\r\n\r\n        <ListItem\r\n            button\r\n            onClick={() => {\r\n              this.props.navigateTo({\r\n                path: \"/resources\"\r\n              });\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n             <img src=\"/folder-outline.svg\"></img>\r\n            </ListItemIcon>\r\n            <ListItemText primary={\"Resources\"} />\r\n          </ListItem>\r\n\r\n<ListItem\r\nbutton\r\nonClick={() => {\r\n  this.props.navigateTo({\r\n    path: \"/donate\"\r\n  });\r\n}}\r\n>\r\n<ListItemIcon>\r\n <img src=\"/heart-multiple-outline.svg\"></img>\r\n</ListItemIcon>\r\n<ListItemText primary={\"Donate\"} />\r\n\r\n</ListItem>\r\n\r\n</List>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <CssBaseline />\r\n        <AppBar position=\"fixed\" className={classes.appBar}>\r\n          <Toolbar>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"Open drawer\"\r\n              onClick={this.handleDrawerToggle}\r\n              className={classes.menuButton}\r\n            >\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <nav className={classes.drawer}>\r\n          {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n          <Hidden smUp implementation=\"css\">\r\n            <Drawer\r\n              container={this.props.container}\r\n              variant=\"temporary\"\r\n              anchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\r\n              open={this.state.mobileOpen}\r\n              onClose={this.handleDrawerToggle}\r\n              classes={{\r\n                paper: classes.drawerPaper\r\n              }}\r\n            >\r\n              {drawer}\r\n            </Drawer>\r\n          </Hidden>\r\n          <Hidden xsDown implementation=\"css\">\r\n            <Drawer\r\n              classes={{\r\n                paper: classes.drawerPaper\r\n              }}\r\n              variant=\"permanent\"\r\n              open\r\n            >\r\n              {drawer}\r\n            </Drawer>\r\n          </Hidden>\r\n        </nav>\r\n        <main className={classes.content}>\r\n          <div className={classes.toolbar} />\r\n          {this.props.children}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nResponsiveDrawer.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // Injected by the documentation to work in an iframe.\r\n  // You won't need it on your project.\r\n  container: PropTypes.object,\r\n  theme: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(ResponsiveDrawer);\r\n","import PageNavigation from \"./PageNavigation\";\r\n\r\nimport go from \"../../store/go\";\r\n\r\nexport default go.container(PageNavigation);\r\n","import React, { Component } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport _ from \"lodash\";\r\n\r\nconst moods = [\r\n  {\r\n    value: \"😀\",\r\n    label: \"😀\"\r\n  },\r\n  {\r\n    value: \"😅\",\r\n    label: \"😅\"\r\n  },\r\n  {\r\n    value: \"😇\",\r\n    label: \"😇\"\r\n  },\r\n  {\r\n    value: \"🤔\",\r\n    label: \"🤔\"\r\n  },\r\n  {\r\n    value: \"😰\",\r\n    label: \"😰\"\r\n  }\r\n];\r\n\r\nclass PlayerProfile extends Component {\r\n  state = {\r\n    playerName: \"\",\r\n    playerEmoji: \"😀\"\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      [name]: event.target.value\r\n    });\r\n    if (name === \"playerName\" || name === \"playerEmoji\") {\r\n      this.safePlayerProfileUpdate();\r\n    }\r\n  };\r\n\r\n  sendProfileToPeers = () => {\r\n    this.props.updatePlayerProfile({\r\n      room: this.props.room,\r\n      payload: {\r\n        peerId: this.props.peerId,\r\n        playerName: this.state.playerName,\r\n        playerEmoji: this.state.playerEmoji\r\n      }\r\n    });\r\n  };\r\n\r\n  safePlayerProfileUpdate = _.debounce(async () => {\r\n    this.sendProfileToPeers();\r\n  }, 1 * 1000);\r\n\r\n  componentWillMount() {\r\n    const profile = {\r\n      peerId: this.props.peerId,\r\n      playerName: \"guest\",\r\n      playerEmoji: \"😀\"\r\n    };\r\n    this.setState({\r\n      ...profile\r\n    });\r\n\r\n    this.safePlayerProfileUpdate();\r\n    \r\n    this.props.room.on(\"peer joined\", async peer => {\r\n      console.log(\"Peer joined the room\", peer);\r\n      this.sendProfileToPeers();\r\n    });\r\n    this.props.room.on(\"subscribed\", () => {\r\n      // console.log(\"Now connected!\");\r\n      this.sendProfileToPeers();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TextField\r\n          id=\"standard-select-currency\"\r\n          select\r\n          label=\"Mood\"\r\n          value={this.state.playerEmoji}\r\n          onChange={this.handleChange(\"playerEmoji\")}\r\n          margin=\"normal\"\r\n        >\r\n          {moods.map(option => (\r\n            <MenuItem key={option.value} value={option.value}>\r\n              {option.label}\r\n            </MenuItem>\r\n          ))}\r\n        </TextField>\r\n        &nbsp;&nbsp;\r\n        <TextField\r\n          label=\"Nickname\"\r\n          value={this.state.playerName}\r\n          onChange={this.handleChange(\"playerName\")}\r\n          margin=\"normal\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayerProfile;\r\n","import PlayerProfile from \"./PlayerProfile\";\r\nimport go from \"../../store/go\";\r\nexport default go.container(PlayerProfile);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport { App } from \"./components\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}